<!DOCTYPE html><html class="hide-aside" lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>OpencvPython正经教程 | Iamsleepingnow 世界</title><meta name="author" content="彭҈̢̛艺҉͜͝伟҈̧̕"><meta name="copyright" content="彭҈̢̛艺҉͜͝伟҈̧̕"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ff3c96"><meta name="description" content="OpencvPython正经教程■（〇）标准模板123456789101112131415import cv2 as cvimport numpy as npimport os.path as pafrom matplotlib import pyplot as plt# -----------------------------------------res &#x3D; &amp;#x27;..&#x2F;..&#x2F;Asse">
<meta property="og:type" content="article">
<meta property="og:title" content="OpencvPython正经教程">
<meta property="og:url" content="http://iamsleepingnow.github.io/2021/02/03/Python/opencvPython%E6%95%99%E7%A8%8B/index.html">
<meta property="og:site_name" content="Iamsleepingnow 世界">
<meta property="og:description" content="OpencvPython正经教程■（〇）标准模板123456789101112131415import cv2 as cvimport numpy as npimport os.path as pafrom matplotlib import pyplot as plt# -----------------------------------------res &#x3D; &amp;#x27;..&#x2F;..&#x2F;Asse">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://iamsleepingnow.github.io/img/avatar.jpg">
<meta property="article:published_time" content="2021-02-03T09:19:50.000Z">
<meta property="article:modified_time" content="2021-02-03T12:54:52.316Z">
<meta property="article:author" content="彭҈̢̛艺҉͜͝伟҈̧̕">
<meta property="article:tag" content="教程">
<meta property="article:tag" content="python">
<meta property="article:tag" content="绘图">
<meta property="article:tag" content="长文">
<meta property="article:tag" content="Opencv">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://iamsleepingnow.github.io/img/avatar.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://iamsleepingnow.github.io/2021/02/03/Python/opencvPython%E6%95%99%E7%A8%8B/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: false,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'OpencvPython正经教程',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-02-03 20:54:52'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="Iamsleepingnow 世界" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">39</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">68</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 世界</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-save"></i><span> 档案</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-quote-left"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 功能</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tools/music/"><i class="fa-fw fas fa-play"></i><span> 歌单</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-arrows-alt"></i><span> 信息</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/banner_default_2k.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="Iamsleepingnow 世界"><span class="site-name">Iamsleepingnow 世界</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 世界</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-save"></i><span> 档案</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-quote-left"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 功能</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tools/music/"><i class="fa-fw fas fa-play"></i><span> 歌单</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-arrows-alt"></i><span> 信息</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">OpencvPython正经教程</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-02-03T09:19:50.000Z" title="发表于 2021-02-03 17:19:50">2021-02-03</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-02-03T12:54:52.316Z" title="更新于 2021-02-03 20:54:52">2021-02-03</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/python/">python</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="OpencvPython正经教程"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="OpencvPython正经教程"><a href="#OpencvPython正经教程" class="headerlink" title="OpencvPython正经教程"></a>OpencvPython正经教程</h1><h2 id="■（〇）标准模板"><a href="#■（〇）标准模板" class="headerlink" title="■（〇）标准模板"></a>■（〇）标准模板</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> os.path <span class="keyword">as</span> pa</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="comment"># -----------------------------------------</span></span><br><span class="line">res = <span class="string">&#x27;../../AssetResources&#x27;</span>  <span class="comment"># pa.join(res, &#x27;Images/&#x27;)</span></span><br><span class="line"><span class="comment"># -----------------------------------------</span></span><br><span class="line">img = np.zeros((<span class="number">300</span>, <span class="number">300</span>), dtype=np.uint8)</span><br><span class="line">img[<span class="number">0</span>:img.shape[<span class="number">0</span>], <span class="number">0</span>:img.shape[<span class="number">1</span>]] = <span class="number">255</span></span><br><span class="line">cv.imshow(<span class="string">&#x27;img&#x27;</span>, img)</span><br><span class="line"><span class="comment"># -----------------------------------------</span></span><br><span class="line">cv.waitKey(<span class="number">0</span>)</span><br><span class="line">cv.destroyAllWindows()</span><br><span class="line"><span class="comment"># -----------------------------------------</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="【模块引入】"><a href="#【模块引入】" class="headerlink" title="【模块引入】"></a>【模块引入】</h3><p>之后都使用模块简写来代替模块全称</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv  <span class="comment"># opencv本体模块</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np  <span class="comment"># 数据处理基础模块</span></span><br><span class="line"><span class="keyword">import</span> os.path <span class="keyword">as</span> pa  <span class="comment"># 系统路径处理模块</span></span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt  <span class="comment"># 绘图模块</span></span><br></pre></td></tr></table></figure>



<h2 id="■（一）图像处理基础框架"><a href="#■（一）图像处理基础框架" class="headerlink" title="■（一）图像处理基础框架"></a>■（一）图像处理基础框架</h2><h3 id="【图像读取】"><a href="#【图像读取】" class="headerlink" title="【图像读取】"></a>【图像读取】</h3><p>cv.imread()【读取图像】</p>
<p>cv.IMREAD_UNCHANGED 或 -1 (原格式)</p>
<p>cv.IMREAD_GRAYSCALE 或 0 (灰度)</p>
<p>cv.IMREAD_COLOR 或 1 (三通道)</p>
<p>cv.IMREAD_ANYDEPTH 或 2 (高位图)//cv.IMREAD_ANYCOLOR 或 4 (其他颜色)</p>
<p>cv.IMREAD_REDUSED_COLOR_2/4/8 (三通道缩小)//cv.IMREAD_REDUSED_GRAYSCALE_2/4/8 (灰度缩小)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">res = <span class="string">&#x27;../../AssetResources&#x27;</span> <span class="comment"># pa.join(res, &#x27;Images/&#x27;)  # 地址</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/zt_1.png&#x27;</span>), cv.IMREAD_COLOR)</span><br><span class="line"><span class="comment"># 获取的img对象是np.ndarray数组</span></span><br></pre></td></tr></table></figure>

<h3 id="【窗口定义】"><a href="#【窗口定义】" class="headerlink" title="【窗口定义】"></a>【窗口定义】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 允许使用未定义窗口</span></span><br><span class="line">cv.namedWindow(<span class="string">&#x27;win_1&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="【图像显示】"><a href="#【图像显示】" class="headerlink" title="【图像显示】"></a>【图像显示】</h3><p>cv.imshow()【显示到窗口里】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv.imshow(<span class="string">&#x27;win_1&#x27;</span>, img)</span><br></pre></td></tr></table></figure>

<h3 id="【窗口等待】"><a href="#【窗口等待】" class="headerlink" title="【窗口等待】"></a>【窗口等待】</h3><p>cv.waitkey()【等待输入】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<h3 id="【窗口返回】"><a href="#【窗口返回】" class="headerlink" title="【窗口返回】"></a>【窗口返回】</h3><p>cv.destroyWindow()【返回窗口】<br>cv.destroyAllWindows()【全部返回】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cv.destroyWindow(<span class="string">&#x27;win&#x27;</span>)</span><br><span class="line">cv.destroyAllWindows()</span><br></pre></td></tr></table></figure>

<h3 id="【图像写入】"><a href="#【图像写入】" class="headerlink" title="【图像写入】"></a>【图像写入】</h3><p>cv.imwrite()【图像输出】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">res = <span class="string">&#x27;../../AssetResources&#x27;</span> <span class="comment"># pa.join(res, &#x27;Images/&#x27;)  # 地址</span></span><br><span class="line">cv.imwrite(pa.join(res, <span class="string">&#x27;Images/zt_2.png&#x27;</span>), img)</span><br></pre></td></tr></table></figure>



<h2 id="■（二）通道与像素"><a href="#■（二）通道与像素" class="headerlink" title="■（二）通道与像素"></a>■（二）通道与像素</h2><h3 id="【图像信息】"><a href="#【图像信息】" class="headerlink" title="【图像信息】"></a>【图像信息】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 图像坐标类似于二维笛卡尔坐标系第四象限坐标</span></span><br><span class="line"><span class="comment"># img.shape返回一个列表[row, col, cha]，row和col是行数(纵)和列数(横)，cha是通道数</span></span><br><span class="line"><span class="comment"># 在opencv中，通道数012默认为BGR而不是RGB</span></span><br><span class="line"><span class="comment"># img.size返回行*列*通道的大小</span></span><br><span class="line"><span class="comment"># img.dtype返回图像数据类型</span></span><br></pre></td></tr></table></figure>

<h3 id="【图像类型】"><a href="#【图像类型】" class="headerlink" title="【图像类型】"></a>【图像类型】</h3><h4 id="（二值图）"><a href="#（二值图）" class="headerlink" title="（二值图）"></a>（二值图）</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 每个像素只有一个元素，元素除了1就是0，表示白和黑</span></span><br></pre></td></tr></table></figure>

<h4 id="（灰度图-8位-）"><a href="#（灰度图-8位-）" class="headerlink" title="（灰度图(8位)）"></a>（灰度图(8位)）</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 每个像素只有一个元素，元素在2^0-1~2^8-1之间(0~255)</span></span><br></pre></td></tr></table></figure>

<h4 id="（彩色图-8位-）"><a href="#（彩色图-8位-）" class="headerlink" title="（彩色图(8位)）"></a>（彩色图(8位)）</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 每个像素有三个元素，元素在2^0-1~2^8-1之间(0~255)，各表示R(红)G(绿)B(蓝)所占的比例</span></span><br></pre></td></tr></table></figure>

<h3 id="【无中生有】"><a href="#【无中生有】" class="headerlink" title="【无中生有】"></a>【无中生有】</h3><p>np.zeros()【生成一个元素都为0的数组】</p>
<p>np.ones()【生成一个元素都为1的数组】</p>
<p>np.random.randint()【生成一个元素随机的数组】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成8位3通道5行6列数组，数组元素都为0</span></span><br><span class="line">img0 = np.zeros((<span class="number">5</span>, <span class="number">6</span>, <span class="number">3</span>), dtype=np.uint8)</span><br><span class="line"><span class="comment"># 生成8位3通道5行6列数组，数组元素都为1</span></span><br><span class="line">img1 = np.ones((<span class="number">5</span>, <span class="number">6</span>, <span class="number">3</span>), dtype=np.uint8)</span><br><span class="line"><span class="comment"># 生成8位3通道5行6列数组，数组元素都为0~256(不包含)之间的整数</span></span><br><span class="line">img2 = np.random.randint(<span class="number">0</span>, <span class="number">256</span>, size=[<span class="number">5</span>, <span class="number">6</span>, <span class="number">3</span>], dtype=np.uint8)</span><br></pre></td></tr></table></figure>

<h3 id="【使用切刀】"><a href="#【使用切刀】" class="headerlink" title="【使用切刀】"></a>【使用切刀】</h3><p>[行数开始 : 行数结束, 列数开始 : 列数结束, 通道数开始 : 通道数结束]【表示图像中的一个部分】</p>
<p>[:, :, :]【表示整张图(三通道)】</p>
<p>[:, :]【表示整张图(灰度图)】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/yw.png&#x27;</span>), -<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(img))</span><br><span class="line">list_b = img[:, :, <span class="number">0</span>]  <span class="comment"># 拆分蓝通道</span></span><br><span class="line">list_g = img[:, :, <span class="number">1</span>]  <span class="comment"># 拆分绿通道</span></span><br><span class="line">list_r = img[:, :, <span class="number">2</span>]  <span class="comment"># 拆分红通道</span></span><br><span class="line">cv.imshow(<span class="string">&#x27;showOri&#x27;</span>, img)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">img[:, :, <span class="number">0</span>] = <span class="number">255</span> - list_b</span><br><span class="line">img[:, :, <span class="number">1</span>] = list_g</span><br><span class="line">img[:, :, <span class="number">2</span>] = list_r</span><br><span class="line">cv.imshow(<span class="string">&#x27;showChanged&#x27;</span>, img)</span><br><span class="line">cv.imwrite(pa.join(res, <span class="string">&#x27;Images/output.png&#x27;</span>), img)</span><br><span class="line"><span class="comment"># ----------------B-------------------------</span></span><br><span class="line">blue = np.zeros((<span class="number">300</span>, <span class="number">300</span>, <span class="number">3</span>), dtype=np.uint8)</span><br><span class="line">blue[:, :, <span class="number">0</span>] = <span class="number">255</span></span><br><span class="line"><span class="comment"># print(&#x27;blue=\n&#x27;, blue)</span></span><br><span class="line">cv.imshow(<span class="string">&#x27;blue&#x27;</span>, blue)</span><br><span class="line"><span class="comment"># ----------------G-------------------------</span></span><br><span class="line">green = np.zeros((<span class="number">300</span>, <span class="number">300</span>, <span class="number">3</span>), dtype=np.uint8)</span><br><span class="line">green[:, :, <span class="number">1</span>] = <span class="number">255</span></span><br><span class="line"><span class="comment"># print(&#x27;green=\n&#x27;, green)</span></span><br><span class="line">cv.imshow(<span class="string">&#x27;green&#x27;</span>, green)</span><br><span class="line"><span class="comment"># ----------------R-------------------------</span></span><br><span class="line">red = np.zeros((<span class="number">300</span>, <span class="number">300</span>, <span class="number">3</span>), dtype=np.uint8)</span><br><span class="line">red[:, :, <span class="number">2</span>] = <span class="number">255</span></span><br><span class="line"><span class="comment"># print(&#x27;red=\n&#x27;, red)</span></span><br><span class="line">cv.imshow(<span class="string">&#x27;red&#x27;</span>, red)</span><br><span class="line"><span class="comment"># ----------------BGR-------------------------</span></span><br><span class="line">bgrImg = np.zeros((<span class="number">300</span>, <span class="number">300</span>, <span class="number">3</span>), dtype=np.uint8)</span><br><span class="line">bgrImg[:, <span class="number">0</span>:<span class="number">100</span>, <span class="number">0</span>] = <span class="number">255</span></span><br><span class="line">bgrImg[:, <span class="number">100</span>:<span class="number">200</span>, <span class="number">1</span>] = <span class="number">255</span></span><br><span class="line">bgrImg[:, <span class="number">200</span>:<span class="number">300</span>, <span class="number">2</span>] = <span class="number">255</span></span><br><span class="line">bgrImg[<span class="number">0</span>:<span class="number">100</span>, :, <span class="number">0</span>] = <span class="number">255</span></span><br><span class="line">bgrImg[<span class="number">100</span>:<span class="number">200</span>, :, <span class="number">1</span>] = <span class="number">255</span></span><br><span class="line">bgrImg[<span class="number">200</span>:<span class="number">300</span>, :, <span class="number">2</span>] = <span class="number">255</span></span><br><span class="line">cv.imshow(<span class="string">&#x27;bgrImg&#x27;</span>, bgrImg)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">cv.waitKey(<span class="number">0</span>)</span><br><span class="line">cv.destroyAllWindows()</span><br></pre></td></tr></table></figure>

<h3 id="【访问像素】"><a href="#【访问像素】" class="headerlink" title="【访问像素】"></a>【访问像素】</h3><p>cv.item()【读取某个像素或元素】</p>
<p>cv.itemset()【写入某个像素或元素】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">img = np.random.randint(<span class="number">10</span>, <span class="number">200</span>, size=[<span class="number">500</span>, <span class="number">500</span>, <span class="number">3</span>], dtype=np.uint8)</span><br><span class="line"><span class="comment"># print(&#x27;img=\n&#x27;, img)</span></span><br><span class="line"><span class="built_in">print</span>(img.item(<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>)) <span class="comment"># ndarray.item()获取值</span></span><br><span class="line">img.itemset((<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>), <span class="number">255</span>) <span class="comment"># ndarray.itemset()修改值</span></span><br><span class="line"><span class="built_in">print</span>(img.item(<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>))</span><br></pre></td></tr></table></figure>

<h3 id="【通道拆合】"><a href="#【通道拆合】" class="headerlink" title="【通道拆合】"></a>【通道拆合】</h3><p>cv.split()【通道拆分】</p>
<p>cv.merge()【通道合并】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">b, g, r = cv.split(img)</span><br><span class="line">ret = cv.merge([<span class="number">255</span> - g, b, r * <span class="number">2</span>])  <span class="comment"># 传递的是列表，而不是三个对象</span></span><br></pre></td></tr></table></figure>



<h2 id="■（三）图像混合与位运算"><a href="#■（三）图像混合与位运算" class="headerlink" title="■（三）图像混合与位运算"></a>■（三）图像混合与位运算</h2><h3 id="【图像加法】"><a href="#【图像加法】" class="headerlink" title="【图像加法】"></a>【图像加法】</h3><p>+</p>
<p>cv.add()【加法】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">img2 = img1 + img1  <span class="comment"># 超过最大数，就变成最小数</span></span><br><span class="line">img3 = cv.add(img1, img1)  <span class="comment"># 超过最大数，就变成最大数</span></span><br></pre></td></tr></table></figure>

<h3 id="【图像混合】"><a href="#【图像混合】" class="headerlink" title="【图像混合】"></a>【图像混合】</h3><p>cv.addWeighted()【加权混合】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># addWeighted(src1, alpha, src2, beta, gamma)</span></span><br><span class="line"><span class="comment"># src1 scr2 是两张一样大小的图片</span></span><br><span class="line"><span class="comment"># alpha beta 是两张图融合时所占0~1之间的比例</span></span><br><span class="line"><span class="comment"># gamma 是亮度增值</span></span><br><span class="line"><span class="comment"># addWeighted = src1 * alpha + src2 * beta + gamma</span></span><br><span class="line">cut3 = cv.addWeighted(cut1, <span class="number">0.3</span>, cut2, <span class="number">0.7</span>, <span class="number">50</span>)</span><br></pre></td></tr></table></figure>

<h3 id="【逻辑运算】"><a href="#【逻辑运算】" class="headerlink" title="【逻辑运算】"></a>【逻辑运算】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 逻辑运算</span></span><br><span class="line"><span class="comment"># ----------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># 	a		b	|	and		or		xor		nand	nor		xnor</span></span><br><span class="line"><span class="comment"># ----------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># 	0		0	|	0		0		0		1		1		1</span></span><br><span class="line"><span class="comment"># 	0		1	|	0		1		1		1		0		0</span></span><br><span class="line"><span class="comment"># 	1		0	|	0		1		1		1		0		0</span></span><br><span class="line"><span class="comment"># 	1		1	|	1		1		0		0		0		1</span></span><br><span class="line"><span class="comment"># ----------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># 与：满足所有要求才满足</span></span><br><span class="line"><span class="comment"># 或：至少满足一个要求才满足</span></span><br><span class="line"><span class="comment"># 异或：要求状态不一样才满足，要求状态一样就不满足</span></span><br><span class="line"><span class="comment"># 与非/或非/同或：同上列三种相反</span></span><br></pre></td></tr></table></figure>

<h3 id="【按位运算】"><a href="#【按位运算】" class="headerlink" title="【按位运算】"></a>【按位运算】</h3><p>cv.bitwise_and()【与】</p>
<p>cv.bitwise_or()【或】</p>
<p>cv.bitwise_xor()【异或】</p>
<p>cv.bitwise_not()【非】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 十进制：198	二进制：1 1 0 0 0 1 1 0</span></span><br><span class="line"><span class="comment"># 十进制：219	二进制：1 1 0 1 1 0 1 1</span></span><br><span class="line"><span class="comment"># ----------------------------------------</span></span><br><span class="line"><span class="comment"># 与运算：194	二进制：1 1 0 0 0 0 1 0</span></span><br><span class="line"><span class="comment"># 或运算：223	二进制：1 1 0 1 1 1 1 1</span></span><br><span class="line"><span class="comment"># 异或算：029	二进制：0 0 0 1 1 1 0 1</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/dr.jpg&#x27;</span>), cv.IMREAD_REDUCED_COLOR_4)</span><br><span class="line">imgMask = np.zeros(img.shape, dtype=np.uint8)</span><br><span class="line">imgMask[<span class="number">500</span>:<span class="number">850</span>, <span class="number">200</span>:<span class="number">400</span>] = <span class="number">255</span></span><br><span class="line">masked = cv.bitwise_or(img, imgMask)</span><br></pre></td></tr></table></figure>

<h3 id="【掩模-遮罩-】"><a href="#【掩模-遮罩-】" class="headerlink" title="【掩模(遮罩)】"></a>【掩模(遮罩)】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">img1 = np.ones((<span class="number">5</span>, <span class="number">5</span>), dtype=np.uint8) * <span class="number">3</span></span><br><span class="line">img2 = np.ones((<span class="number">5</span>, <span class="number">5</span>), dtype=np.uint8) * <span class="number">5</span></span><br><span class="line">mask = np.zeros((<span class="number">5</span>, <span class="number">5</span>), dtype=np.uint8)</span><br><span class="line">mask[<span class="number">2</span>:<span class="number">4</span>, <span class="number">2</span>:<span class="number">4</span>] = <span class="number">1</span></span><br><span class="line">img3 = cv.add(img1, img2, mask=mask)  <span class="comment"># 加入掩模</span></span><br><span class="line"><span class="built_in">print</span>(img3)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/dr.jpg&#x27;</span>), cv.IMREAD_REDUCED_COLOR_4)</span><br><span class="line">imgMask = np.zeros(img.shape, dtype=np.uint8)</span><br><span class="line">imgMask[<span class="number">400</span>:<span class="number">800</span>, <span class="number">400</span>:<span class="number">600</span>] = <span class="number">255</span></span><br><span class="line">imgMask[<span class="number">100</span>:<span class="number">500</span>, <span class="number">100</span>:<span class="number">400</span>] = <span class="number">255</span></span><br><span class="line">changed = cv.bitwise_and(img, img, imgMask)  <span class="comment"># 加入掩模</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">    changed[:, :, i] = cv.add(changed[:, :, i], <span class="number">100</span>) <span class="comment"># 三通道同时加100</span></span><br><span class="line">cv.imshow(<span class="string">&#x27;img&#x27;</span>, img)</span><br><span class="line">cv.imshow(<span class="string">&#x27;imgMask&#x27;</span>, imgMask)</span><br><span class="line">cv.imshow(<span class="string">&#x27;changed&#x27;</span>, changed)</span><br><span class="line"><span class="comment"># -----------------------------------------</span></span><br><span class="line">cv.waitKey(<span class="number">0</span>)</span><br><span class="line">cv.destroyAllWindows()</span><br></pre></td></tr></table></figure>

<h3 id="【位平面分解】"><a href="#【位平面分解】" class="headerlink" title="【位平面分解】"></a>【位平面分解】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将灰度图的每个像素里的值转换成八位二进制数，</span></span><br><span class="line"><span class="comment"># 每一位制成一张二值图，</span></span><br><span class="line"><span class="comment"># 提取八个位里每一位上的二值数，判断是否为1，</span></span><br><span class="line"><span class="comment"># 若为1，则该像素在该位平面上的显示就不是黑色</span></span><br><span class="line"><span class="comment"># 二进制转十进制：</span></span><br><span class="line"><span class="comment"># dec = a7*2^7 +  a6*2^6 +  a5*2^5 +  a4*2^4 +  a3*2^3 +  a2*2^2 +  a1*2^1 +  a0*2^0</span></span><br><span class="line"><span class="comment"># a7的占比最高，对图像影响最大；a0的占比最低，对图像影响最小</span></span><br><span class="line"><span class="comment"># 位平面分解顺序：</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/zt.jpg&#x27;</span>), cv.IMREAD_REDUCED_GRAYSCALE_2) <span class="comment"># 读取灰度图</span></span><br><span class="line">cv.imshow(<span class="string">&#x27;img&#x27;</span>, img) <span class="comment"># 显示原图</span></span><br><span class="line">w, h = img.shape <span class="comment"># 原图大小：w * h</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">x = np.zeros((w, h, <span class="number">8</span>), dtype=np.uint8) <span class="comment"># 生成8个原图大小的8位二维数组x</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">8</span>):</span><br><span class="line">    x[:, :, i] = <span class="number">2</span> ** i <span class="comment"># 每张图里的二维数组都是2的i次方，作为比较样板图</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">r = np.zeros((w, h, <span class="number">8</span>), dtype=np.uint8) <span class="comment"># 生成8个原图大小的8位二维数组r</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">8</span>):</span><br><span class="line">    <span class="comment"># r用来记录 原图 与 x的每张二次方样板图 之间的 位与运算</span></span><br><span class="line">    r[:, :, i] = cv.bitwise_and(img, x[:, :, i])</span><br><span class="line">    mask1 = r[:, :, i] &gt; <span class="number">0</span> <span class="comment"># 记录r的每张图里不是黑色的部分，将这些部分设为白色</span></span><br><span class="line">    mask2 = r[:, :, i] &lt;= <span class="number">0</span> <span class="comment"># 记录r的每张图里是黑色的部分(包含小于0的部分)，将这些部分设为黑色</span></span><br><span class="line">    r[mask1] = <span class="number">255</span></span><br><span class="line">    r[mask2] = <span class="number">0</span></span><br><span class="line">    cv.imshow(<span class="built_in">str</span>(i), r[:, :, i]) <span class="comment"># 依次显示出来</span></span><br><span class="line">    cv.imwrite(<span class="built_in">str</span>(i) + <span class="string">&#x27;_zt.png&#x27;</span>, r[:, :, i])</span><br><span class="line"><span class="comment"># -----------------------------------------</span></span><br><span class="line">cv.waitKey(<span class="number">0</span>)</span><br><span class="line">cv.destroyAllWindows()</span><br></pre></td></tr></table></figure>

<h3 id="【图像加密】"><a href="#【图像加密】" class="headerlink" title="【图像加密】"></a>【图像加密】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 因为 a [异或] b = c，所以 c [异或] b = a</span></span><br><span class="line"><span class="comment"># 因为 图像 [异或] 钥匙 = 加密，所以 加密 [异或] 钥匙 = 图像</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/zt.jpg&#x27;</span>), <span class="number">0</span>) <span class="comment"># 读取灰度图</span></span><br><span class="line">r, c, cha = img.shape</span><br><span class="line">img_b = img[:, :, <span class="number">0</span>]</span><br><span class="line">img_g = img[:, :, <span class="number">1</span>]</span><br><span class="line">img_r = img[:, :, <span class="number">2</span>]</span><br><span class="line">key = np.random.randint(<span class="number">0</span>, <span class="number">256</span>, size=[r, c], dtype=np.uint8)</span><br><span class="line">img_enc_b = cv.bitwise_xor(img_b, key)</span><br><span class="line">img_enc_g = cv.bitwise_xor(img_g, key)</span><br><span class="line">img_enc_r = cv.bitwise_xor(img_r, key)</span><br><span class="line">img_enc = cv.merge([img_enc_b, img_enc_g, img_enc_r])</span><br><span class="line">cv.imwrite(pa.join(res, <span class="string">&#x27;Images/output.jpg&#x27;</span>), img_enc)</span><br><span class="line">cv.imwrite(pa.join(res, <span class="string">&#x27;Images/key.jpg&#x27;</span>), key)</span><br><span class="line"><span class="comment"># --------------------------------------------------</span></span><br><span class="line">img_enc_b = img_enc[:, :, <span class="number">0</span>]</span><br><span class="line">img_enc_g = img_enc[:, :, <span class="number">1</span>]</span><br><span class="line">img_enc_r = img_enc[:, :, <span class="number">2</span>]</span><br><span class="line">img_dec_b = cv.bitwise_xor(img_enc_b, key)</span><br><span class="line">img_dec_g = cv.bitwise_xor(img_enc_g, key)</span><br><span class="line">img_dec_r = cv.bitwise_xor(img_enc_r, key)</span><br><span class="line">img_dec = cv.merge([img_dec_b, img_dec_g, img_dec_r])</span><br><span class="line">cv.imshow(<span class="string">&#x27;img&#x27;</span>, img)</span><br><span class="line">cv.imshow(<span class="string">&#x27;key&#x27;</span>, key)</span><br><span class="line">cv.imshow(<span class="string">&#x27;encryption&#x27;</span>, img_enc)</span><br><span class="line">cv.imshow(<span class="string">&#x27;decryption&#x27;</span>, img_dec)</span><br><span class="line"><span class="comment"># -----------------------------------------</span></span><br><span class="line">cv.waitKey(<span class="number">0</span>)</span><br><span class="line">cv.destroyAllWindows()</span><br></pre></td></tr></table></figure>

<h3 id="【数字水印】"><a href="#【数字水印】" class="headerlink" title="【数字水印】"></a>【数字水印】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将对图像影响最小的那一位平面替换成水印的二值图，就可以对图像加上数字水印</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/zt.jpg&#x27;</span>), cv.IMREAD_REDUCED_GRAYSCALE_4)</span><br><span class="line">watermark = cv.imread(pa.join(res, <span class="string">&#x27;Images/watermark.png&#x27;</span>), cv.IMREAD_REDUCED_GRAYSCALE_4)</span><br><span class="line">cv.imshow(<span class="string">&#x27;img&#x27;</span>, img)</span><br><span class="line">cv.imshow(<span class="string">&#x27;watermark&#x27;</span>, watermark)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">row_o, col_o = img.shape  <span class="comment"># 原图大小</span></span><br><span class="line">row_w, col_w = watermark.shape  <span class="comment"># 水印大小</span></span><br><span class="line">row_min, col_min = <span class="built_in">min</span>(row_o, row_w), <span class="built_in">min</span>(col_o, col_w)  <span class="comment"># 原图与水印相交大小</span></span><br><span class="line">minWater = watermark[</span><br><span class="line">           <span class="built_in">int</span>(row_w / <span class="number">2</span> - row_min / <span class="number">2</span>):<span class="built_in">int</span>(row_w / <span class="number">2</span> + row_min / <span class="number">2</span>),</span><br><span class="line">           <span class="built_in">int</span>(col_w / <span class="number">2</span> - col_min / <span class="number">2</span>):<span class="built_in">int</span>(col_w / <span class="number">2</span> + col_min / <span class="number">2</span>)</span><br><span class="line">           ]</span><br><span class="line">resizeWater = np.zeros((row_o, col_o), dtype=np.uint8)</span><br><span class="line">resizeWater[  <span class="comment"># 符合原图大小的水印图</span></span><br><span class="line">           <span class="built_in">int</span>(row_o / <span class="number">2</span> - row_min / <span class="number">2</span>):<span class="built_in">int</span>(row_o / <span class="number">2</span> + row_min / <span class="number">2</span>),</span><br><span class="line">           <span class="built_in">int</span>(col_o / <span class="number">2</span> - col_min / <span class="number">2</span>):<span class="built_in">int</span>(col_o / <span class="number">2</span> + col_min / <span class="number">2</span>)</span><br><span class="line">           ] = minWater</span><br><span class="line">watermarkWhiteArea = resizeWater[:, :] &gt; <span class="number">0</span>  <span class="comment"># 取水印图的非黑色部分</span></span><br><span class="line">resizeWater[watermarkWhiteArea] = <span class="number">1</span>  <span class="comment"># 将这些部分设为二值图的白色</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 生成一张原图大小的全是254的灰度图：1111 1110</span></span><br><span class="line">t254 = np.ones((row_o, col_o), dtype=np.uint8) * <span class="number">254</span></span><br><span class="line">img_bit7 = cv.bitwise_and(img, t254)  <span class="comment"># 将原图的二进制的空缺位清零</span></span><br><span class="line">img_rebit = cv.bitwise_or(img_bit7, resizeWater)  <span class="comment"># 将原图的二进制的空缺位填充为水印图</span></span><br><span class="line">cv.imshow(<span class="string">&#x27;rebit&#x27;</span>, img_rebit)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 生成一张原图大小的全是1的灰度图：0000 0001</span></span><br><span class="line">t001 = np.ones((row_o, col_o), dtype=np.uint8) * <span class="number">1</span></span><br><span class="line">img_waterbit = cv.bitwise_and(img_rebit, t001)  <span class="comment"># 将水印原图的二进制的水印位剔除出来</span></span><br><span class="line">img_waterbitWhiteArea = img_waterbit[:, :] &gt; <span class="number">0</span>  <span class="comment"># 取水印图的非黑色部分</span></span><br><span class="line">img_waterbit[img_waterbitWhiteArea] = <span class="number">255</span>  <span class="comment"># 将这些部分设为八位图的白色</span></span><br><span class="line">cv.imshow(<span class="string">&#x27;waterbit&#x27;</span>, img_waterbit)</span><br><span class="line"><span class="comment"># -----------------------------------------</span></span><br><span class="line">cv.waitKey(<span class="number">0</span>)</span><br><span class="line">cv.destroyAllWindows()</span><br></pre></td></tr></table></figure>



<h2 id="■（四）色彩空间"><a href="#■（四）色彩空间" class="headerlink" title="■（四）色彩空间"></a>■（四）色彩空间</h2><h3 id="【色彩空间类型】"><a href="#【色彩空间类型】" class="headerlink" title="【色彩空间类型】"></a>【色彩空间类型】</h3><h4 id="（RGB-BGR）"><a href="#（RGB-BGR）" class="headerlink" title="（RGB/BGR）"></a>（RGB/BGR）</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># R(red) # G(green) # B(blue)</span></span><br></pre></td></tr></table></figure>


<h4 id="（GRAY）"><a href="#（GRAY）" class="headerlink" title="（GRAY）"></a>（GRAY）</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Gray = 0.299*R + 0.587*G + 0.114*B</span></span><br><span class="line"><span class="comment"># R = Gray # G = Gray # B = Gray</span></span><br></pre></td></tr></table></figure>


<h4 id="（XYZ）"><a href="#（XYZ）" class="headerlink" title="（XYZ）"></a>（XYZ）</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># [X]   [ 0.412453  0.357580  0.180423]   [R]</span></span><br><span class="line"><span class="comment"># [Y] = [ 0.212671  0.715160  0.072169] * [G]</span></span><br><span class="line"><span class="comment"># [Z]   [ 0.019334  0.119193  0.950227]   [B]</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># [R]   [ 3.240479  -1.53715 -0.498535]   [X]</span></span><br><span class="line"><span class="comment"># [G] = [-0.969256  1.875991  0.041556] * [Y]</span></span><br><span class="line"><span class="comment"># [B]   [ 0.055648 -0.204043  1.057311]   [Z]</span></span><br></pre></td></tr></table></figure>


<h4 id="（HSV）"><a href="#（HSV）" class="headerlink" title="（HSV）"></a>（HSV）</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># V = max(R, G, B)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># V != 0, S = (V - min(R, G, B)) / V</span></span><br><span class="line"><span class="comment"># V == 0, S = 0</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># V == R, H = (60 * (G - B)) / (V - min(R, G, B))</span></span><br><span class="line"><span class="comment"># V == G, H = 120 + (60 * (B - R)) / (V - min(R, G, B))</span></span><br><span class="line"><span class="comment"># V == B, H = 240 + (60 * (R - G)) / (V - min(R, G, B))</span></span><br></pre></td></tr></table></figure>

<h3 id="【色彩空间转换】"><a href="#【色彩空间转换】" class="headerlink" title="【色彩空间转换】"></a>【色彩空间转换】</h3><p>cv.cvtColor()【色彩空间转换】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">imgtest = cv.imread(pa.join(res, <span class="string">&#x27;Images/dr.jpg&#x27;</span>), <span class="number">1</span>)</span><br><span class="line">rsttest = cv.cvtColor(imgtest, cv.COLOR_BGR2HSV)</span><br></pre></td></tr></table></figure>

<h3 id="【颜色选择】"><a href="#【颜色选择】" class="headerlink" title="【颜色选择】"></a>【颜色选择】</h3><p>cv.inRange()【判断是否在某范围内】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">minS, maxS = <span class="number">0</span>, <span class="number">255</span>  <span class="comment"># 饱和度</span></span><br><span class="line">minV, maxV = <span class="number">0</span>, <span class="number">255</span>  <span class="comment"># 亮度</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/dr.jpg&#x27;</span>), cv.IMREAD_REDUCED_COLOR_4)</span><br><span class="line">hsv = cv.cvtColor(img, cv.COLOR_BGR2HSV)</span><br><span class="line">cv.imshow(<span class="string">&#x27;img&#x27;</span>, img)</span><br><span class="line"><span class="comment"># b</span></span><br><span class="line">minBlue = np.array([<span class="number">100</span>, minS, minV])</span><br><span class="line">maxBlue = np.array([<span class="number">150</span>, maxS, maxV])</span><br><span class="line">mask = cv.inRange(hsv, minBlue, maxBlue)</span><br><span class="line">blue = cv.bitwise_and(img, img, mask=mask)</span><br><span class="line">cv.imshow(<span class="string">&#x27;blue&#x27;</span>, blue)</span><br><span class="line"><span class="comment"># g</span></span><br><span class="line">minGreen = np.array([<span class="number">40</span>, minS, minV])</span><br><span class="line">maxGreen = np.array([<span class="number">60</span>, maxS, maxV])</span><br><span class="line">mask = cv.inRange(hsv, minGreen, maxGreen)</span><br><span class="line">green = cv.bitwise_and(img, img, mask=mask)</span><br><span class="line">cv.imshow(<span class="string">&#x27;green&#x27;</span>, green)</span><br><span class="line"><span class="comment"># r</span></span><br><span class="line">minRed = np.array([<span class="number">0</span>, minS, minV])</span><br><span class="line">maxRed = np.array([<span class="number">30</span>, maxS, maxV])</span><br><span class="line">mask = cv.inRange(hsv, minRed, maxRed)</span><br><span class="line">red = cv.bitwise_and(img, img, mask=mask)</span><br><span class="line">cv.imshow(<span class="string">&#x27;red&#x27;</span>, red)</span><br><span class="line"><span class="comment"># -----------------------------------------</span></span><br><span class="line">cv.waitKey(<span class="number">0</span>)</span><br><span class="line">cv.destroyAllWindows()</span><br></pre></td></tr></table></figure>
<h3 id="【Alpha透明通道】"><a href="#【Alpha透明通道】" class="headerlink" title="【Alpha透明通道】"></a>【Alpha透明通道】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/zt_alpha.png&#x27;</span>), -<span class="number">1</span>)</span><br><span class="line">b, g, r, a = cv.split(img)</span><br><span class="line">cv.imshow(<span class="string">&#x27;img&#x27;</span>, img)</span><br><span class="line">a[:, :] = <span class="number">125</span></span><br><span class="line">bgra125 = cv.merge([b, g, r, a])</span><br></pre></td></tr></table></figure>



<h2 id="■（五）几何变换"><a href="#■（五）几何变换" class="headerlink" title="■（五）几何变换"></a>■（五）几何变换</h2><h3 id="【缩放】"><a href="#【缩放】" class="headerlink" title="【缩放】"></a>【缩放】</h3><p>cv.resize()【重置大小】</p>
<p>cv.INTER_NEAREST (最邻近插值)</p>
<p>cv.INTER_LINEAR (双线性插值)</p>
<p>cv.INTER_CUBIC (三次样条插值)</p>
<p>cv.INTER_AREA (区域插值)</p>
<p>cv.INTER_LINEAR_EXACT (位精确双线性插值)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 缩小图像最好使用区域插值，放大图像最好使用双线性插值</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/zt.jpg&#x27;</span>), -<span class="number">1</span>)</span><br><span class="line">row, col = img.shape[:<span class="number">2</span>]</span><br><span class="line">size = (<span class="built_in">int</span>(col * <span class="number">0.1</span>), <span class="built_in">int</span>(row * <span class="number">0.1</span>)) <span class="comment"># 第一个是列，第二个才是行</span></span><br><span class="line">rst = cv.resize(img, size, cv.INTER_AREA)</span><br></pre></td></tr></table></figure>

<h3 id="【翻转】"><a href="#【翻转】" class="headerlink" title="【翻转】"></a>【翻转】</h3><p>cv.flip()【翻转】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/zt.jpg&#x27;</span>), -<span class="number">1</span>)</span><br><span class="line">flipx = cv.flip(img, <span class="number">0</span>)  <span class="comment"># x轴翻转</span></span><br><span class="line">flipy = cv.flip(img, <span class="number">1</span>)  <span class="comment"># y轴翻转</span></span><br><span class="line">flipxy = cv.flip(img, -<span class="number">1</span>)  <span class="comment"># xy轴翻转</span></span><br></pre></td></tr></table></figure>

<h3 id="【仿射-映射-】"><a href="#【仿射-映射-】" class="headerlink" title="【仿射(映射)】"></a>【仿射(映射)】</h3><p>cv.warpAffine()【仿射】</p>
<h4 id="（手动矩阵构成）"><a href="#（手动矩阵构成）" class="headerlink" title="（手动矩阵构成）"></a>（手动矩阵构成）</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/lena.jpg&#x27;</span>), -<span class="number">1</span>)</span><br><span class="line">height, width = img.shape[:<span class="number">2</span>]</span><br><span class="line">x, y = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line"><span class="comment"># M = [x1, y1, o1] [x2, y2, o2]</span></span><br><span class="line"><span class="comment"># move(i, j) = x1 * i + y1 * j + o1, x2 * i + y2 * j + o2</span></span><br><span class="line">M = np.float32([[<span class="number">1</span>, -<span class="number">0.5</span>, x], [<span class="number">0</span>, <span class="number">1</span>, y]])</span><br><span class="line">move = cv.warpAffine(img, M, (width, height))</span><br></pre></td></tr></table></figure>

<h4 id="（旋转矩阵构成）"><a href="#（旋转矩阵构成）" class="headerlink" title="（旋转矩阵构成）"></a>（旋转矩阵构成）</h4><p>cv.getRotationMatrix2D()【带有旋转量的矩阵构成】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/lena.jpg&#x27;</span>), -<span class="number">1</span>)</span><br><span class="line">height, width = img.shape[:<span class="number">2</span>]</span><br><span class="line"><span class="comment"># getRotationMatrix2D可以同时修改 平移旋转缩放</span></span><br><span class="line">M = cv.getRotationMatrix2D((width / <span class="number">2</span>, height / <span class="number">2</span>), <span class="number">45</span>, <span class="number">0.6</span>)</span><br><span class="line">move = cv.warpAffine(img, M, (width, height))</span><br></pre></td></tr></table></figure>

<h4 id="（平行四边形构成）"><a href="#（平行四边形构成）" class="headerlink" title="（平行四边形构成）"></a>（平行四边形构成）</h4><p>cv.getAffineTransform()【带有坐标量的矩阵构成】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/lena.jpg&#x27;</span>), -<span class="number">1</span>)</span><br><span class="line">height, width = img.shape[:<span class="number">2</span>]</span><br><span class="line">p1 = np.float32([[<span class="number">0</span>, <span class="number">0</span>],  <span class="comment"># 左上角原始位置（带偏移量）</span></span><br><span class="line">                 [height, <span class="number">0</span>],  <span class="comment"># 右上角原始位置（带偏移量）</span></span><br><span class="line">                 [<span class="number">0</span>, width]])  <span class="comment"># 左下角原始位置（带偏移量）</span></span><br><span class="line">p2 = np.float32([[<span class="number">0</span>, height * <span class="number">0.1</span>],  <span class="comment"># 左上角映射位置</span></span><br><span class="line">                 [width * <span class="number">0.8</span>, height * <span class="number">0.25</span>],  <span class="comment"># 右上角映射位置</span></span><br><span class="line">                 [width * <span class="number">0.1</span>, height * <span class="number">0.5</span>]])  <span class="comment"># 左下角映射位置</span></span><br><span class="line">M = cv.getAffineTransform(p1, p2)</span><br><span class="line">move = cv.warpAffine(img, M, (width, height))</span><br></pre></td></tr></table></figure>

<h3 id="【四角变幻】"><a href="#【四角变幻】" class="headerlink" title="【四角变幻】"></a>【四角变幻】</h3><p>cv.warpPerspective()【透视变幻】</p>
<p>cv.getPerspectiveTransform()【透视矩阵构成】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/lena.jpg&#x27;</span>), -<span class="number">1</span>)</span><br><span class="line">height, width = img.shape[:<span class="number">2</span>]</span><br><span class="line">p1 = np.float32([[<span class="number">0</span>, <span class="number">0</span>],  <span class="comment"># 左上角原始位置（带偏移量）</span></span><br><span class="line">                 [width, <span class="number">0</span>],  <span class="comment"># 右上角原始位置（带偏移量）</span></span><br><span class="line">                 [<span class="number">0</span>, height],  <span class="comment"># 左下角原始位置（带偏移量）</span></span><br><span class="line">                 [width, height]])  <span class="comment"># 右下角原始位置（带偏移量）</span></span><br><span class="line">p2 = np.float32([[width / <span class="number">5</span>, <span class="number">0</span>],  <span class="comment"># 左上角映射位置</span></span><br><span class="line">                 [width / <span class="number">5</span> * <span class="number">4</span>, <span class="number">100</span>],  <span class="comment"># 右上角映射位置</span></span><br><span class="line">                 [<span class="number">0</span>, height],  <span class="comment"># 左下角映射位置</span></span><br><span class="line">                 [width, height]])  <span class="comment"># 右下角映射位置</span></span><br><span class="line">M = cv.getPerspectiveTransform(p1, p2)</span><br><span class="line">move = cv.warpPerspective(img, M, (width, height))</span><br></pre></td></tr></table></figure>

<h3 id="【逐像素映射】"><a href="#【逐像素映射】" class="headerlink" title="【逐像素映射】"></a>【逐像素映射】</h3><p>remap()【逐像素映射】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">img = np.random.randint(<span class="number">0</span>, <span class="number">256</span>, size=[<span class="number">4</span>, <span class="number">5</span>], dtype=np.uint8)</span><br><span class="line">row, col = img.shape</span><br><span class="line">mapx = np.zeros(img.shape, np.float32)</span><br><span class="line">mapy = np.zeros(img.shape, np.float32)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(row):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(col):</span><br><span class="line">        mapx.itemset((i, j), j)  <span class="comment"># 修改j可影响复制图片</span></span><br><span class="line">        mapy.itemset((i, j), i)  <span class="comment"># 修改i可影响复制图片</span></span><br><span class="line">rst = cv.remap(img, mapx, mapy, cv.INTER_LINEAR)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#mapx = 列</span></span><br><span class="line"><span class="comment">#[[0 1 2 3 4]</span></span><br><span class="line"><span class="comment"># [0 1 2 三 4]</span></span><br><span class="line"><span class="comment"># [0 1 2 3 4]</span></span><br><span class="line"><span class="comment"># [0 1 2 3 4]]</span></span><br><span class="line"><span class="comment">#mapy = 行</span></span><br><span class="line"><span class="comment">#[[0 0 0 0 0]</span></span><br><span class="line"><span class="comment"># [1 1 1 一 1]</span></span><br><span class="line"><span class="comment"># [2 2 2 2 2]</span></span><br><span class="line"><span class="comment"># [3 3 3 3 3]]</span></span><br><span class="line"><span class="comment"># 意思是：将img中第一行第三列的元素map到第一行第三列中去</span></span><br><span class="line"><span class="comment"># 上述代码可将图片复制一份，没有对图片做任何修改</span></span><br></pre></td></tr></table></figure>



<h2 id="■（六）阈值"><a href="#■（六）阈值" class="headerlink" title="■（六）阈值"></a>■（六）阈值</h2><h3 id="【阈值提取处理】"><a href="#【阈值提取处理】" class="headerlink" title="【阈值提取处理】"></a>【阈值提取处理】</h3><p>cv.threshold()【阈值提取】</p>
<p>cv.THRESH_BINARY (二值化处理)</p>
<p>cv.THRESH_BINARY_INV (反二值化处理)</p>
<p>cv.THRESH_TRUNC (截断处理)</p>
<p>cv.THRESH_TOZERO (低阈值零处理)</p>
<p>cv.YHRESH_TOZERO_INV (超阈值零处理)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/lena.jpg&#x27;</span>), <span class="number">0</span>)</span><br><span class="line">thresRet, rst = cv.threshold(img, <span class="number">127</span>, <span class="number">255</span>, cv.THRESH_TOZERO_INV)</span><br><span class="line">thres0 = rst[:, :] == <span class="number">0</span></span><br><span class="line">rst[thres0] = <span class="number">255</span></span><br></pre></td></tr></table></figure>
<h3 id="【自适应阈值处理】"><a href="#【自适应阈值处理】" class="headerlink" title="【自适应阈值处理】"></a>【自适应阈值处理】</h3><p>cv.adaptiveThreshold()【自适应阈值处理】</p>
<p>cv.ADAPTIVE_THRESH_MEAN_C (权重一致自适应法)</p>
<p>cv.ADAPTIVE_THRESH_GAUSSIAN_C (高斯方程自适应法)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/dr.jpg&#x27;</span>), cv.IMREAD_REDUCED_GRAYSCALE_4)</span><br><span class="line">thresRet, rst = cv.threshold(img, <span class="number">127</span>, <span class="number">255</span>, cv.THRESH_TOZERO)</span><br><span class="line">rst2 = cv.adaptiveThreshold(</span><br><span class="line">    img, <span class="number">255</span>, cv.ADAPTIVE_THRESH_MEAN_C, cv.THRESH_BINARY, <span class="number">5</span>, <span class="number">1</span>)</span><br><span class="line">rst3 = cv.adaptiveThreshold(</span><br><span class="line">    img, <span class="number">255</span>, cv.ADAPTIVE_THRESH_GAUSSIAN_C, cv.THRESH_BINARY, <span class="number">5</span>, <span class="number">5</span>)</span><br></pre></td></tr></table></figure>


<h3 id="【自动匹配阈值处理】"><a href="#【自动匹配阈值处理】" class="headerlink" title="【自动匹配阈值处理】"></a>【自动匹配阈值处理】</h3><p>cv.THRESH_OTSU (自动匹配阈值处理)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/zt.jpg&#x27;</span>), cv.IMREAD_REDUCED_GRAYSCALE_4)</span><br><span class="line">thresRet1, rst1 = cv.threshold(img, <span class="number">127</span>, <span class="number">255</span>, cv.THRESH_BINARY)</span><br><span class="line">thresRet2, rst2 = cv.threshold(img, <span class="number">127</span>, <span class="number">255</span>, cv.THRESH_OTSU)</span><br></pre></td></tr></table></figure>



<h2 id="■（七）图像滤波-模糊"><a href="#■（七）图像滤波-模糊" class="headerlink" title="■（七）图像滤波(模糊)"></a>■（七）图像滤波(模糊)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在图像上的每个像素的周围一圈像素计算加权值再传递给原图像而将原图像平滑处理的方法叫图像滤波</span></span><br><span class="line"><span class="comment"># 像素与周围一圈的参与像素叫做卷积核</span></span><br></pre></td></tr></table></figure>

<h3 id="【均值滤波】"><a href="#【均值滤波】" class="headerlink" title="【均值滤波】"></a>【均值滤波】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将卷积核里所有数加在一起求平均数</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/lena.jpg&#x27;</span>), -<span class="number">1</span>)</span><br><span class="line">blur = cv.blur(img, (<span class="number">10</span>, <span class="number">10</span>))</span><br></pre></td></tr></table></figure>

<h3 id="【方框滤波】"><a href="#【方框滤波】" class="headerlink" title="【方框滤波】"></a>【方框滤波】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将卷积核里所有数加在一起求平均数或者就仅仅是加在一起</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/lena.jpg&#x27;</span>), -<span class="number">1</span>)</span><br><span class="line">blur = cv.boxFilter(img, -<span class="number">1</span>, (<span class="number">10</span>, <span class="number">10</span>))</span><br><span class="line">blur1 = cv.boxFilter(img, -<span class="number">1</span>, (<span class="number">10</span>, <span class="number">10</span>), normalize=<span class="number">1</span>)</span><br><span class="line">blur2 = cv.boxFilter(img, -<span class="number">1</span>, (<span class="number">10</span>, <span class="number">10</span>), normalize=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<h3 id="【高斯滤波】"><a href="#【高斯滤波】" class="headerlink" title="【高斯滤波】"></a>【高斯滤波】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将卷积核里所有数按距离算权重加在一起求平均数</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/lena.jpg&#x27;</span>))</span><br><span class="line">blur = cv.GaussianBlur(img, (<span class="number">11</span>, <span class="number">11</span>), <span class="number">6</span>, <span class="number">4</span>)  <span class="comment"># 卷积核的值必须是奇数</span></span><br></pre></td></tr></table></figure>

<h3 id="【中值滤波】"><a href="#【中值滤波】" class="headerlink" title="【中值滤波】"></a>【中值滤波】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将卷积核里所有数求中位数</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/lena.jpg&#x27;</span>))</span><br><span class="line">blur = cv.medianBlur(img, <span class="number">9</span>)  <span class="comment"># 卷积核的值必须是奇数</span></span><br></pre></td></tr></table></figure>
<h3 id="【双边滤波】"><a href="#【双边滤波】" class="headerlink" title="【双边滤波】"></a>【双边滤波】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将卷积核里所有数按距离按色差算权重加在一起求平均数</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/lena.jpg&#x27;</span>))</span><br><span class="line">blur = cv.bilateralFilter(img, <span class="number">5</span>, <span class="number">50</span>, <span class="number">50</span>)</span><br></pre></td></tr></table></figure>

<h3 id="【自制2D卷积】"><a href="#【自制2D卷积】" class="headerlink" title="【自制2D卷积】"></a>【自制2D卷积】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 自制卷积核</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/lena.jpg&#x27;</span>))</span><br><span class="line">kernel = np.ones((<span class="number">9</span>, <span class="number">9</span>), np.float32) / (<span class="number">9</span> * <span class="number">9</span>)</span><br><span class="line">blur = cv.filter2D(img, -<span class="number">1</span>, kernel)</span><br></pre></td></tr></table></figure>



<h2 id="■（八）形态学"><a href="#■（八）形态学" class="headerlink" title="■（八）形态学"></a>■（八）形态学</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在二值图像上的每个像素的周围一圈像素计算异同值再拓展或收缩再传递给原图像而将原图像形状改变</span></span><br><span class="line"><span class="comment"># 像素与周围一圈的参与像素叫做结构元核函数</span></span><br></pre></td></tr></table></figure>
<h3 id="【腐蚀】"><a href="#【腐蚀】" class="headerlink" title="【腐蚀】"></a>【腐蚀】</h3><p>cv.erode()【腐蚀形态学】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">img = np.zeros((<span class="number">5</span>, <span class="number">5</span>), dtype=np.uint8)</span><br><span class="line">img[<span class="number">1</span>:<span class="number">4</span>, <span class="number">1</span>:<span class="number">4</span>] = <span class="number">1</span></span><br><span class="line">kernel = np.ones((<span class="number">3</span>, <span class="number">1</span>), dtype=np.uint8)</span><br><span class="line">ero = cv.erode(img, kernel)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;img\n&#x27;</span>, img)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;kernel\n&#x27;</span>, kernel)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;ero\n&#x27;</span>, ero)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/morph.png&#x27;</span>), -<span class="number">1</span>)</span><br><span class="line">kernel = np.ones((<span class="number">5</span>, <span class="number">5</span>), dtype=np.uint8)</span><br><span class="line">ero = cv.erode(img, kernel)</span><br><span class="line">cv.imshow(<span class="string">&#x27;img&#x27;</span>, img)</span><br><span class="line">cv.imshow(<span class="string">&#x27;ero&#x27;</span>, ero)</span><br></pre></td></tr></table></figure>

<h3 id="【膨胀】"><a href="#【膨胀】" class="headerlink" title="【膨胀】"></a>【膨胀】</h3><p>cv.dilate()【膨胀形态学】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">img = np.zeros((<span class="number">5</span>, <span class="number">5</span>), dtype=np.uint8)</span><br><span class="line">img[<span class="number">2</span>:<span class="number">3</span>, <span class="number">1</span>:<span class="number">4</span>] = <span class="number">1</span></span><br><span class="line">kernel = np.ones((<span class="number">3</span>, <span class="number">1</span>), dtype=np.uint8)</span><br><span class="line">dil = cv.dilate(img, kernel)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;img\n&#x27;</span>, img)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;kernel\n&#x27;</span>, kernel)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;dil\n&#x27;</span>, dil)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/morph.png&#x27;</span>), -<span class="number">1</span>)</span><br><span class="line">kernel = np.ones((<span class="number">5</span>, <span class="number">5</span>), dtype=np.uint8)</span><br><span class="line">dil = cv.dilate(img, kernel)</span><br><span class="line">cv.imshow(<span class="string">&#x27;img&#x27;</span>, img)</span><br><span class="line">cv.imshow(<span class="string">&#x27;dil&#x27;</span>, dil)</span><br></pre></td></tr></table></figure>

<h3 id="【通用函数】"><a href="#【通用函数】" class="headerlink" title="【通用函数】"></a>【通用函数】</h3><p>cv.morphologyEx()【形态学修改】</p>
<p>cv.MORPH_ERODE (腐蚀)</p>
<p>cv.MORPH_DILATE (膨胀)</p>
<p>cv.MORPH_OPEN (开运算)</p>
<p>cv.MORPH_CLOSE (闭运算)</p>
<p>cv.MORPH_GRADIENT (形态学梯度运算)</p>
<p>cv.MORPH_TOPHAT (礼帽运算)</p>
<p>cv.MORPH_BLACKHAT (黑帽运算)</p>
<h3 id="【开运算】"><a href="#【开运算】" class="headerlink" title="【开运算】"></a>【开运算】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先腐蚀再膨胀</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/morph.png&#x27;</span>), -<span class="number">1</span>)</span><br><span class="line">kernel = np.ones((<span class="number">5</span>, <span class="number">5</span>), dtype=np.uint8)</span><br><span class="line">openArg = cv.morphologyEx(img, cv.MORPH_OPEN, kernel)</span><br></pre></td></tr></table></figure>

<h3 id="【闭运算】"><a href="#【闭运算】" class="headerlink" title="【闭运算】"></a>【闭运算】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先膨胀再腐蚀</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/morph.png&#x27;</span>), -<span class="number">1</span>)</span><br><span class="line">kernel = np.ones((<span class="number">5</span>, <span class="number">5</span>), dtype=np.uint8)</span><br><span class="line">closeArg = cv.morphologyEx(img, cv.MORPH_CLOSE, kernel)</span><br></pre></td></tr></table></figure>

<h3 id="【形态学梯度运算】"><a href="#【形态学梯度运算】" class="headerlink" title="【形态学梯度运算】"></a>【形态学梯度运算】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用膨胀减腐蚀</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/morph.png&#x27;</span>), -<span class="number">1</span>)</span><br><span class="line">kernel = np.ones((<span class="number">2</span>, <span class="number">2</span>), dtype=np.uint8)</span><br><span class="line">gradient = cv.morphologyEx(img, cv.MORPH_GRADIENT, kernel)</span><br></pre></td></tr></table></figure>

<h3 id="【礼帽运算】"><a href="#【礼帽运算】" class="headerlink" title="【礼帽运算】"></a>【礼帽运算】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用原图减开运算</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/morph.png&#x27;</span>), -<span class="number">1</span>)</span><br><span class="line">kernel = np.ones((<span class="number">2</span>, <span class="number">2</span>), dtype=np.uint8)</span><br><span class="line">tophat = cv.morphologyEx(img, cv.MORPH_TOPHAT, kernel)</span><br></pre></td></tr></table></figure>

<h3 id="【黑帽运算】"><a href="#【黑帽运算】" class="headerlink" title="【黑帽运算】"></a>【黑帽运算】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用闭运算减原图</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/morph.png&#x27;</span>), -<span class="number">1</span>)</span><br><span class="line">kernel = np.ones((<span class="number">2</span>, <span class="number">2</span>), dtype=np.uint8)</span><br><span class="line">blackhat = cv.morphologyEx(img, cv.MORPH_BLACKHAT, kernel)</span><br></pre></td></tr></table></figure>

<h3 id="【核函数类型】"><a href="#【核函数类型】" class="headerlink" title="【核函数类型】"></a>【核函数类型】</h3><p>cv.getStructuringElement()【形态学核函数构造】</p>
<p>cv.MORPH_RECT (矩形)</p>
<p>cv.MORPH_CROSS (十字架)</p>
<p>cv.MORPH_ELLIPSE (椭圆)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/morph.png&#x27;</span>), -<span class="number">1</span>)</span><br><span class="line">k1 = cv.getStructuringElement(cv.MORPH_RECT, (<span class="number">50</span>, <span class="number">50</span>))</span><br><span class="line">k2 = cv.getStructuringElement(cv.MORPH_CROSS, (<span class="number">50</span>, <span class="number">50</span>))</span><br><span class="line">k3 = cv.getStructuringElement(cv.MORPH_ELLIPSE, (<span class="number">50</span>, <span class="number">50</span>))</span><br><span class="line">morph1 = cv.morphologyEx(img, cv.MORPH_DILATE, k1)</span><br><span class="line">morph2 = cv.morphologyEx(img, cv.MORPH_DILATE, k2)</span><br><span class="line">morph3 = cv.morphologyEx(img, cv.MORPH_DILATE, k3)</span><br></pre></td></tr></table></figure>



<h2 id="■（九）边缘梯度"><a href="#■（九）边缘梯度" class="headerlink" title="■（九）边缘梯度"></a>■（九）边缘梯度</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 图像横方向或纵方向变化的速度即图像梯度，大致称作图像边缘</span></span><br></pre></td></tr></table></figure>

<h3 id="【Sobel算子】"><a href="#【Sobel算子】" class="headerlink" title="【Sobel算子】"></a>【Sobel算子】</h3><p>cv.Sobel()【sobel算子】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/gradient.png&#x27;</span>), <span class="number">0</span>)</span><br><span class="line">sobel1 = cv.Sobel(img, cv.CV_64F, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">sobel1 = cv.convertScaleAbs(sobel1)</span><br><span class="line">sobel2 = cv.Sobel(img, cv.CV_64F, <span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">sobel2 = cv.convertScaleAbs(sobel2)</span><br><span class="line">sobel3 = cv.addWeighted(sobel1, <span class="number">1</span>, sobel2, <span class="number">1</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<h3 id="【Scharr算子】"><a href="#【Scharr算子】" class="headerlink" title="【Scharr算子】"></a>【Scharr算子】</h3><p>cv.Scharr()【scharr算子】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/gradient.png&#x27;</span>), <span class="number">0</span>)</span><br><span class="line">scharr1 = cv.Scharr(img, cv.CV_64F, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">scharr1 = cv.convertScaleAbs(scharr1)</span><br><span class="line">scharr2 = cv.Scharr(img, cv.CV_64F, <span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">scharr2 = cv.convertScaleAbs(scharr2)</span><br><span class="line">scharr3 = cv.addWeighted(scharr1, <span class="number">1</span>, scharr2, <span class="number">1</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<h3 id="【Laplacian算子】"><a href="#【Laplacian算子】" class="headerlink" title="【Laplacian算子】"></a>【Laplacian算子】</h3><p>cv.Laplacian()【laplacian算子】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/gradient.png&#x27;</span>), <span class="number">0</span>)</span><br><span class="line">lap = cv.Laplacian(img, cv.CV_64F, ksize=<span class="number">1</span>)</span><br><span class="line">lap = cv.convertScaleAbs(lap)</span><br></pre></td></tr></table></figure>



<h2 id="■（十）边缘检测"><a href="#■（十）边缘检测" class="headerlink" title="■（十）边缘检测"></a>■（十）边缘检测</h2><h3 id="【专业边缘检测】"><a href="#【专业边缘检测】" class="headerlink" title="【专业边缘检测】"></a>【专业边缘检测】</h3><p>cv.Canny()【canny边缘检测】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/lena.jpg&#x27;</span>), <span class="number">0</span>)</span><br><span class="line">res = cv.Canny(img, <span class="number">127</span>, <span class="number">255</span>)</span><br></pre></td></tr></table></figure>



<h2 id="■（十一）图像金字塔"><a href="#■（十一）图像金字塔" class="headerlink" title="■（十一）图像金字塔"></a>■（十一）图像金字塔</h2><h3 id="【高斯金字塔】"><a href="#【高斯金字塔】" class="headerlink" title="【高斯金字塔】"></a>【高斯金字塔】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 一张图像不断向下采样，删除偶数行和列，可以得到高斯金字塔</span></span><br></pre></td></tr></table></figure>

<h3 id="【拉普拉斯金字塔】"><a href="#【拉普拉斯金字塔】" class="headerlink" title="【拉普拉斯金字塔】"></a>【拉普拉斯金字塔】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 一张图像先向下再向上采样，用原图与之相减而构成拉普拉斯金字塔</span></span><br></pre></td></tr></table></figure>

<h3 id="【图像向下采样】"><a href="#【图像向下采样】" class="headerlink" title="【图像向下采样】"></a>【图像向下采样】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/lena.jpg&#x27;</span>), <span class="number">1</span>)</span><br><span class="line">res1 = cv.pyrDown(img)</span><br><span class="line">res2 = cv.pyrDown(res1)</span><br><span class="line">res3 = cv.pyrDown(res2)</span><br></pre></td></tr></table></figure>

<h3 id="【图像向上采样】"><a href="#【图像向上采样】" class="headerlink" title="【图像向上采样】"></a>【图像向上采样】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/lena.jpg&#x27;</span>), <span class="number">1</span>)</span><br><span class="line">res1 = cv.pyrUp(img)</span><br><span class="line">res2 = cv.pyrUp(res1)</span><br><span class="line">res3 = cv.pyrUp(res2)</span><br></pre></td></tr></table></figure>

<h3 id="【拉普拉斯与恢复原图】"><a href="#【拉普拉斯与恢复原图】" class="headerlink" title="【拉普拉斯与恢复原图】"></a>【拉普拉斯与恢复原图】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/lena.jpg&#x27;</span>), <span class="number">1</span>)</span><br><span class="line">g0 = img</span><br><span class="line">g1 = cv.pyrDown(g0)</span><br><span class="line">g2 = cv.pyrDown(g1)</span><br><span class="line">g3 = cv.pyrDown(g2)</span><br><span class="line">l0 = g0 - cv.pyrUp(g1)</span><br><span class="line">l1 = g1 - cv.pyrUp(g2)</span><br><span class="line">l2 = g2 - cv.pyrUp(g3)</span><br><span class="line"><span class="comment"># 拉普拉斯图是原图与图像采样逆差图的差，用逆差图(受损图)加上拉普拉斯图就可恢复原图</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/lena.jpg&#x27;</span>), <span class="number">1</span>)</span><br><span class="line">g = cv.pyrDown(cv.pyrDown(img))</span><br><span class="line">u = cv.pyrUp(cv.pyrUp(g))</span><br><span class="line">l = img - u</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">reimg = u + l</span><br></pre></td></tr></table></figure>



<h2 id="■（十二）图像轮廓"><a href="#■（十二）图像轮廓" class="headerlink" title="■（十二）图像轮廓"></a>■（十二）图像轮廓</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 二值图中封闭的正形叫图像轮廓</span></span><br></pre></td></tr></table></figure>

<h3 id="【绘制轮廓】"><a href="#【绘制轮廓】" class="headerlink" title="【绘制轮廓】"></a>【绘制轮廓】</h3><p>cv.findContours()【查找图像轮廓】</p>
<p>cv.drawContours【绘制图像轮廓】</p>
<p>cv.RETR_EXTERNAL (只检测外轮廓)</p>
<p>cv.RETR_LIST (检测所有轮廓，不建立等级关系)</p>
<p>cv.RETR_CCOMP (检测所有轮廓，建立二级关系)</p>
<p>cv.RETR_TREE (检测所有轮廓，建立多级关系)</p>
<p>cv.CHAIN_APPROX_NONE (存储所有轮廓点)</p>
<p>cv.CHAIN_APPROX_SIMPLE (压缩所有轮廓点)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/lena.jpg&#x27;</span>))</span><br><span class="line">cv.imshow(<span class="string">&#x27;img&#x27;</span>, img)</span><br><span class="line">imgg = cv.GaussianBlur(img, (<span class="number">11</span>, <span class="number">11</span>), <span class="number">6</span>, <span class="number">4</span>)</span><br><span class="line"><span class="comment"># 1：手动转灰度</span></span><br><span class="line">gray = cv.cvtColor(imgg, cv.COLOR_BGR2GRAY)</span><br><span class="line"><span class="comment"># 2：阈值处理一遍</span></span><br><span class="line">ret, bina = cv.threshold(gray, <span class="number">127</span>, <span class="number">255</span>, cv.THRESH_BINARY)</span><br><span class="line">cv.imshow(<span class="string">&#x27;bina&#x27;</span>, bina)</span><br><span class="line"><span class="comment"># 3：寻找轮廓</span></span><br><span class="line">cont, hier = cv.findContours(bina, cv.RETR_TREE, cv.CHAIN_APPROX_NONE)</span><br><span class="line"><span class="comment"># 4：绘制轮廓</span></span><br><span class="line">black = np.zeros(img.shape, dtype=np.uint8)</span><br><span class="line">imgContDraw1 = cv.drawContours(black, cont, <span class="number">14</span>, (<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>), -<span class="number">1</span>)</span><br><span class="line">imgContDraw2 = cv.drawContours(imgg, cont, -<span class="number">1</span>, (<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">1</span>)</span><br><span class="line">cv.imshow(<span class="string">&#x27;imgContDraw1&#x27;</span>, imgContDraw1)</span><br><span class="line">cv.imshow(<span class="string">&#x27;imgContDraw2&#x27;</span>, imgContDraw2)</span><br><span class="line"><span class="comment"># 5：抠图</span></span><br><span class="line">cut = cv.bitwise_and(img, imgContDraw1)</span><br><span class="line">cv.imshow(<span class="string">&#x27;cut&#x27;</span>, cut)</span><br></pre></td></tr></table></figure>

<h3 id="【矩特征】"><a href="#【矩特征】" class="headerlink" title="【矩特征】"></a>【矩特征】</h3><h4 id="（moments矩集）"><a href="#（moments矩集）" class="headerlink" title="（moments矩集）"></a>（moments矩集）</h4><p>cv.moments()【轮廓的矩】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># --空间矩</span></span><br><span class="line"><span class="comment"># 零阶矩 m00</span></span><br><span class="line"><span class="comment"># 一阶矩 m10 m01</span></span><br><span class="line"><span class="comment"># 二阶矩 m20 m11 m02</span></span><br><span class="line"><span class="comment"># 三阶矩 m30 m21 m12 m03</span></span><br><span class="line"><span class="comment"># --中心矩</span></span><br><span class="line"><span class="comment"># 二阶中心矩 mu20 mu11 mu02</span></span><br><span class="line"><span class="comment"># 三阶中心矩 mu30 mu21 mu12 mu03</span></span><br><span class="line"><span class="comment"># --归一化中心矩</span></span><br><span class="line"><span class="comment"># 二阶Hu矩 nu20 nu11 nu02</span></span><br><span class="line"><span class="comment"># 三阶Hu矩 nu30 nu21 nu12 nu03</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/Contours/contours.png&#x27;</span>), cv.IMREAD_REDUCED_COLOR_2)</span><br><span class="line">cv.imshow(<span class="string">&#x27;img&#x27;</span>, img)</span><br><span class="line"><span class="comment"># 1：手动转灰度</span></span><br><span class="line">gray = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br><span class="line"><span class="comment"># 2：阈值处理一遍</span></span><br><span class="line">ret, bina = cv.threshold(gray, <span class="number">254</span>, <span class="number">255</span>, cv.THRESH_BINARY)</span><br><span class="line">cv.imshow(<span class="string">&#x27;bina&#x27;</span>, bina)</span><br><span class="line"><span class="comment"># 3：寻找轮廓</span></span><br><span class="line">cont, hier = cv.findContours(bina, cv.RETR_TREE, cv.CHAIN_APPROX_SIMPLE)</span><br><span class="line">n = <span class="built_in">len</span>(cont)</span><br><span class="line">contImg = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">    temp = np.zeros(gray.shape, dtype=np.uint8)</span><br><span class="line">    contImg.append(temp)</span><br><span class="line">    contImg[i] = cv.drawContours(contImg[i], cont, i, <span class="number">255</span>, <span class="number">1</span>)</span><br><span class="line">    cv.imshow(<span class="string">f&#x27;cont<span class="subst">&#123;i&#125;</span>&#x27;</span>, contImg[i])</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;矩<span class="subst">&#123;i&#125;</span>\n&#x27;</span>, cv.moments(cont[i]))</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;面积<span class="subst">&#123;i&#125;</span>\n&#x27;</span>, cv.moments(cont[i])[<span class="string">&#x27;m00&#x27;</span>])</span><br></pre></td></tr></table></figure>

<h4 id="（轮廓面积）"><a href="#（轮廓面积）" class="headerlink" title="（轮廓面积）"></a>（轮廓面积）</h4><p>cv.contourArea()【轮廓面积】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">cont, hier = cv.findContours(bina, cv.RETR_TREE, cv.CHAIN_APPROX_SIMPLE)</span><br><span class="line">n = <span class="built_in">len</span>(cont)</span><br><span class="line">contImg = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;cont面积<span class="subst">&#123;i&#125;</span>=&#x27;</span>, cv.contourArea(cont[i]))  <span class="comment"># 面积</span></span><br><span class="line">    temp = np.zeros(gray.shape, dtype=np.uint8)</span><br><span class="line">    contImg.append(temp)</span><br><span class="line">    <span class="keyword">if</span> cv.contourArea(cont[i]) &gt; <span class="number">3000</span>:  <span class="comment"># 只显示面积大过3000平方像素的轮廓</span></span><br><span class="line">        contImg[i] = cv.drawContours(contImg[i], cont, i, <span class="number">255</span>, <span class="number">1</span>)</span><br><span class="line">        cv.imshow(<span class="string">f&#x27;cont<span class="subst">&#123;i&#125;</span>&#x27;</span>, contImg[i])</span><br></pre></td></tr></table></figure>

<h4 id="（轮廓周长）"><a href="#（轮廓周长）" class="headerlink" title="（轮廓周长）"></a>（轮廓周长）</h4><p>cv.arcLength()【轮廓周长】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">cont, hier = cv.findContours(bina, cv.RETR_TREE, cv.CHAIN_APPROX_SIMPLE)</span><br><span class="line">n = <span class="built_in">len</span>(cont)</span><br><span class="line">contImg = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;cont长度<span class="subst">&#123;i&#125;</span>=&#x27;</span>, cv.arcLength(cont[i], <span class="literal">True</span>))  <span class="comment"># 周长</span></span><br><span class="line">    temp = np.zeros(gray.shape, dtype=np.uint8)</span><br><span class="line">    contImg.append(temp)</span><br><span class="line">    contImg[i] = cv.drawContours(contImg[i], cont, i, <span class="number">255</span>, <span class="number">1</span>)</span><br><span class="line">    cv.imshow(<span class="string">f&#x27;cont<span class="subst">&#123;i&#125;</span>&#x27;</span>, contImg[i])</span><br></pre></td></tr></table></figure>

<h4 id="（Hu归一化中心矩）"><a href="#（Hu归一化中心矩）" class="headerlink" title="（Hu归一化中心矩）"></a>（Hu归一化中心矩）</h4><p>cv.HuMoments()【Hu矩】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># --归一化中心矩</span></span><br><span class="line"><span class="comment"># 二阶Hu矩 nu20 nu11 nu02</span></span><br><span class="line"><span class="comment"># 三阶Hu矩 nu30 nu21 nu12 nu03</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/Contours/contours.png&#x27;</span>), cv.IMREAD_REDUCED_COLOR_2)</span><br><span class="line">cv.imshow(<span class="string">&#x27;img&#x27;</span>, img)</span><br><span class="line">gray = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br><span class="line"><span class="built_in">print</span>(cv.HuMoments(cv.moments(gray)))</span><br></pre></td></tr></table></figure>

<h4 id="（轮廓匹配）"><a href="#（轮廓匹配）" class="headerlink" title="（轮廓匹配）"></a>（轮廓匹配）</h4><p>cv.matchShapes()【轮廓匹配】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入图像</span></span><br><span class="line">img1 = cv.imread(pa.join(res, <span class="string">&#x27;Images/Contours/cont1.png&#x27;</span>), cv.IMREAD_REDUCED_COLOR_2)</span><br><span class="line">img2 = cv.imread(pa.join(res, <span class="string">&#x27;Images/Contours/cont2.png&#x27;</span>), cv.IMREAD_REDUCED_COLOR_2)</span><br><span class="line">img3 = cv.imread(pa.join(res, <span class="string">&#x27;Images/Contours/cont3.png&#x27;</span>), cv.IMREAD_REDUCED_COLOR_2)</span><br><span class="line"><span class="comment"># 转灰度信息</span></span><br><span class="line">gray1 = cv.cvtColor(img1, cv.COLOR_BGR2GRAY)</span><br><span class="line">gray2 = cv.cvtColor(img2, cv.COLOR_BGR2GRAY)</span><br><span class="line">gray3 = cv.cvtColor(img3, cv.COLOR_BGR2GRAY)</span><br><span class="line"><span class="comment"># 二值化阈值</span></span><br><span class="line">ret1, bin1 = cv.threshold(gray1, <span class="number">127</span>, <span class="number">255</span>, cv.THRESH_BINARY)</span><br><span class="line">ret2, bin2 = cv.threshold(gray2, <span class="number">127</span>, <span class="number">255</span>, cv.THRESH_BINARY)</span><br><span class="line">ret3, bin3 = cv.threshold(gray3, <span class="number">127</span>, <span class="number">255</span>, cv.THRESH_BINARY)</span><br><span class="line"><span class="comment"># 获取轮廓</span></span><br><span class="line">cont1, hier1 = cv.findContours(bin1, cv.RETR_LIST, cv.CHAIN_APPROX_SIMPLE)</span><br><span class="line">cont2, hier2 = cv.findContours(bin2, cv.RETR_LIST, cv.CHAIN_APPROX_SIMPLE)</span><br><span class="line">cont3, hier3 = cv.findContours(bin3, cv.RETR_LIST, cv.CHAIN_APPROX_SIMPLE)</span><br><span class="line"><span class="comment"># 将 提取检测到的第0个轮廓 进行匹配对比</span></span><br><span class="line">ret0 = cv.matchShapes(cont1[<span class="number">0</span>], cont1[<span class="number">0</span>], <span class="number">1</span>, <span class="number">0</span>)  <span class="comment"># 自己和自己匹配 0.00 无差距</span></span><br><span class="line">ret1 = cv.matchShapes(cont1[<span class="number">0</span>], cont2[<span class="number">0</span>], <span class="number">1</span>, <span class="number">0</span>)  <span class="comment"># 和第二张图匹配 0.07 差距较小</span></span><br><span class="line">ret2 = cv.matchShapes(cont1[<span class="number">0</span>], cont3[<span class="number">0</span>], <span class="number">1</span>, <span class="number">0</span>)  <span class="comment"># 和第三张图匹配 0.19 差距较大</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="built_in">print</span>(ret0)</span><br><span class="line"><span class="built_in">print</span>(ret1)</span><br><span class="line"><span class="built_in">print</span>(ret2)</span><br></pre></td></tr></table></figure>

<h3 id="【形状匹配】"><a href="#【形状匹配】" class="headerlink" title="【形状匹配】"></a>【形状匹配】</h3><h4 id="（正矩形包围框）"><a href="#（正矩形包围框）" class="headerlink" title="（正矩形包围框）"></a>（正矩形包围框）</h4><p>cv.boundingRect()【正矩形包围框】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/Contours/cont1.png&#x27;</span>))</span><br><span class="line">gray = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br><span class="line">ret, bina = cv.threshold(gray, <span class="number">127</span>, <span class="number">255</span>, cv.THRESH_BINARY)</span><br><span class="line">cont, hier = cv.findContours(bina, cv.RETR_LIST, cv.CHAIN_APPROX_SIMPLE)</span><br><span class="line">x, y, w, h = cv.boundingRect(cont[<span class="number">0</span>])  <span class="comment"># 四个返回值：左上角的坐标xy，矩形的长w和宽h</span></span><br><span class="line"><span class="built_in">print</span>(x, y, w, h)</span><br><span class="line"><span class="comment"># 可以使用四点构造绘图</span></span><br><span class="line">arr = np.array([[x, y], [x + w, y], [x + w, y + h], [x, y + h]])</span><br><span class="line">cv.drawContours(img, [arr], -<span class="number">1</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">10</span>)</span><br><span class="line"><span class="comment"># 可以使用矩形构造绘图</span></span><br><span class="line">cv.rectangle(img, (x, y), (x + w, y + h), (<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>)</span><br><span class="line">cv.imshow(<span class="string">&#x27;img&#x27;</span>, img)</span><br><span class="line"><span class="comment"># 也可以返回一个元组</span></span><br><span class="line">rect = cv.boundingRect(cont[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(rect)</span><br></pre></td></tr></table></figure>

<h4 id="（最小矩形包围框）"><a href="#（最小矩形包围框）" class="headerlink" title="（最小矩形包围框）"></a>（最小矩形包围框）</h4><p>cv.minAreaRect()【最小矩形包围框】</p>
<p>cv.boxPoints()【点集构成】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/Contours/cont1.png&#x27;</span>))</span><br><span class="line">gray = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br><span class="line">ret, bina = cv.threshold(gray, <span class="number">127</span>, <span class="number">255</span>, cv.THRESH_BINARY)</span><br><span class="line">cont, hier = cv.findContours(bina, cv.RETR_LIST, cv.CHAIN_APPROX_SIMPLE)</span><br><span class="line">rect = cv.minAreaRect(cont[<span class="number">0</span>])</span><br><span class="line">points = cv.boxPoints(rect)</span><br><span class="line">points = np.int0(points)  <span class="comment"># 将浮点取整</span></span><br><span class="line">img1 = cv.drawContours(img, [points], -<span class="number">1</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">10</span>)</span><br><span class="line">cv.imshow(<span class="string">&#x27;img1&#x27;</span>, img1)</span><br></pre></td></tr></table></figure>

<h4 id="（最小圆包围框）"><a href="#（最小圆包围框）" class="headerlink" title="（最小圆包围框）"></a>（最小圆包围框）</h4><p>cv.minEnclosingCircle()【最小圆包围框】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/Contours/cont1.png&#x27;</span>))</span><br><span class="line">gray = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br><span class="line">ret, bina = cv.threshold(gray, <span class="number">127</span>, <span class="number">255</span>, cv.THRESH_BINARY)</span><br><span class="line">cont, hier = cv.findContours(bina, cv.RETR_LIST, cv.CHAIN_APPROX_SIMPLE)</span><br><span class="line">(x, y), radius = cv.minEnclosingCircle(cont[<span class="number">0</span>])</span><br><span class="line">cv.circle(img, (<span class="built_in">int</span>(x), <span class="built_in">int</span>(y)), <span class="built_in">int</span>(radius), (<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>)</span><br><span class="line">cv.imshow(<span class="string">&#x27;img&#x27;</span>, img)</span><br></pre></td></tr></table></figure>

<h4 id="（最优椭圆包围框）"><a href="#（最优椭圆包围框）" class="headerlink" title="（最优椭圆包围框）"></a>（最优椭圆包围框）</h4><p>cv.fitEllipse()【最优椭圆包围框】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/Contours/cont3.png&#x27;</span>))</span><br><span class="line">gray = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br><span class="line">ret, bina = cv.threshold(gray, <span class="number">127</span>, <span class="number">255</span>, cv.THRESH_BINARY)</span><br><span class="line">cont, hier = cv.findContours(bina, cv.RETR_LIST, cv.CHAIN_APPROX_SIMPLE)</span><br><span class="line">ellipse = cv.fitEllipse(cont[<span class="number">0</span>])</span><br><span class="line">cv.ellipse(img, ellipse, (<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>)</span><br><span class="line">cv.imshow(<span class="string">&#x27;img&#x27;</span>, img)</span><br></pre></td></tr></table></figure>

<h4 id="（最优直线导向）"><a href="#（最优直线导向）" class="headerlink" title="（最优直线导向）"></a>（最优直线导向）</h4><p>cv.fitLine()【最优直线导向】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/Contours/cont3.png&#x27;</span>))</span><br><span class="line">gray = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br><span class="line">ret, bina = cv.threshold(gray, <span class="number">127</span>, <span class="number">255</span>, cv.THRESH_BINARY)</span><br><span class="line">cont, hier = cv.findContours(bina, cv.RETR_LIST, cv.CHAIN_APPROX_SIMPLE)</span><br><span class="line">row, col = img.shape[:<span class="number">2</span>]</span><br><span class="line">[vx, vy, x, y] = cv.fitLine(cont[<span class="number">0</span>], cv.DIST_L2, <span class="number">0</span>, <span class="number">0.01</span>, <span class="number">0.01</span>)</span><br><span class="line">lefty = <span class="built_in">int</span>((-x * vy / vx) + y)</span><br><span class="line">righty = <span class="built_in">int</span>(((col - x) * vy / vx) + y)</span><br><span class="line">cv.line(img, (col - <span class="number">1</span>, righty), (<span class="number">0</span>, lefty), (<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>)</span><br><span class="line">cv.imshow(<span class="string">&#x27;img&#x27;</span>, img)</span><br></pre></td></tr></table></figure>

<h4 id="（最小三角形包围框）"><a href="#（最小三角形包围框）" class="headerlink" title="（最小三角形包围框）"></a>（最小三角形包围框）</h4><p>cv.minEnclosingTriangle()【最小三角形包围框】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/Contours/cont3.png&#x27;</span>))</span><br><span class="line">gray = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br><span class="line">ret, bina = cv.threshold(gray, <span class="number">127</span>, <span class="number">255</span>, cv.THRESH_BINARY)</span><br><span class="line">cont, hier = cv.findContours(bina, cv.RETR_LIST, cv.CHAIN_APPROX_SIMPLE)</span><br><span class="line">area, tran = cv.minEnclosingTriangle(cont[<span class="number">0</span>])</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">3</span>):</span><br><span class="line">    cv.line(img, <span class="built_in">tuple</span>(tran[i][<span class="number">0</span>]), <span class="built_in">tuple</span>(tran[(i + <span class="number">1</span>) % <span class="number">3</span>][<span class="number">0</span>]), (<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>)</span><br><span class="line">cv.imshow(<span class="string">&#x27;img&#x27;</span>, img)</span><br></pre></td></tr></table></figure>

<h4 id="（相似多边形）"><a href="#（相似多边形）" class="headerlink" title="（相似多边形）"></a>（相似多边形）</h4><p>cv.approxPolyDP()【相似多边形】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/Contours/cont3.png&#x27;</span>))</span><br><span class="line">gray = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br><span class="line">ret, bina = cv.threshold(gray, <span class="number">127</span>, <span class="number">255</span>, cv.THRESH_BINARY)</span><br><span class="line">cont, hier = cv.findContours(bina, cv.RETR_LIST, cv.CHAIN_APPROX_SIMPLE)</span><br><span class="line"><span class="comment"># 精度为 0.1 * 周长</span></span><br><span class="line">adp = img.copy()</span><br><span class="line">epsilon = <span class="number">0.1</span> * cv.arcLength(cont[<span class="number">0</span>], <span class="literal">True</span>)</span><br><span class="line">approx = cv.approxPolyDP(cont[<span class="number">0</span>], epsilon, <span class="literal">True</span>)</span><br><span class="line">adp = cv.drawContours(adp, [approx], -<span class="number">1</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">2</span>)</span><br><span class="line">cv.imshow(<span class="string">&#x27;0.1&#x27;</span>, adp)</span><br><span class="line"><span class="comment"># 精度为 0.02 * 周长</span></span><br><span class="line">adp = img.copy()</span><br><span class="line">epsilon = <span class="number">0.02</span> * cv.arcLength(cont[<span class="number">0</span>], <span class="literal">True</span>)</span><br><span class="line">approx = cv.approxPolyDP(cont[<span class="number">0</span>], epsilon, <span class="literal">True</span>)</span><br><span class="line">adp = cv.drawContours(adp, [approx], -<span class="number">1</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">2</span>)</span><br><span class="line">cv.imshow(<span class="string">&#x27;0.05&#x27;</span>, adp)</span><br><span class="line"><span class="comment"># 精度为 0.005 * 周长</span></span><br><span class="line">adp = img.copy()</span><br><span class="line">epsilon = <span class="number">0.005</span> * cv.arcLength(cont[<span class="number">0</span>], <span class="literal">True</span>)</span><br><span class="line">approx = cv.approxPolyDP(cont[<span class="number">0</span>], epsilon, <span class="literal">True</span>)</span><br><span class="line">adp = cv.drawContours(adp, [approx], -<span class="number">1</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">2</span>)</span><br><span class="line">cv.imshow(<span class="string">&#x27;0.01&#x27;</span>, adp)</span><br></pre></td></tr></table></figure>

<h3 id="【凸包】"><a href="#【凸包】" class="headerlink" title="【凸包】"></a>【凸包】</h3><h4 id="（凸包）"><a href="#（凸包）" class="headerlink" title="（凸包）"></a>（凸包）</h4><p>cv.convexHull()【获得凸包】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hull = cv.convexHull(cont[<span class="number">0</span>])</span><br><span class="line">cv.polylines(img, [hull], <span class="literal">True</span>, (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<h4 id="（凸缺陷）"><a href="#（凸缺陷）" class="headerlink" title="（凸缺陷）"></a>（凸缺陷）</h4><p>cv.convexityDefects()【获得凸缺陷】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">hull = cv.convexHull(cont[<span class="number">0</span>], returnPoints=<span class="literal">False</span>)</span><br><span class="line">defects = cv.convexityDefects(cont[<span class="number">0</span>], hull)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(defects.shape[<span class="number">0</span>]):</span><br><span class="line">    s, e, f, d = defects[i, <span class="number">0</span>]</span><br><span class="line">    start = <span class="built_in">tuple</span>(cont[<span class="number">0</span>][s][<span class="number">0</span>])</span><br><span class="line">    end = <span class="built_in">tuple</span>(cont[<span class="number">0</span>][e][<span class="number">0</span>])</span><br><span class="line">    far = <span class="built_in">tuple</span>(cont[<span class="number">0</span>][f][<span class="number">0</span>])</span><br><span class="line">    cv.line(img, start, end, [<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>], <span class="number">2</span>)</span><br><span class="line">    cv.circle(img, far, <span class="number">5</span>, [<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>], -<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<h4 id="（是否凸）"><a href="#（是否凸）" class="headerlink" title="（是否凸）"></a>（是否凸）</h4><p>cv.isContourConvex()【判断形状是否凸】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">img1 = img.copy()</span><br><span class="line">hull = cv.convexHull(cont[<span class="number">0</span>])  <span class="comment"># 构造凸包</span></span><br><span class="line">cv.polylines(img1, [hull], <span class="literal">True</span>, (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>)</span><br><span class="line">cv.imshow(<span class="string">&#x27;img1&#x27;</span>, img1)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;img1\n&#x27;</span>, cv.isContourConvex(hull))</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">img2 = img.copy()</span><br><span class="line">epsilon = <span class="number">0.01</span> * cv.arcLength(cont[<span class="number">0</span>], <span class="literal">True</span>)</span><br><span class="line">approx = cv.approxPolyDP(cont[<span class="number">0</span>], epsilon, <span class="literal">True</span>)  <span class="comment"># 构造逼近四边形</span></span><br><span class="line">img2 = cv.drawContours(img2, [approx], <span class="number">0</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">2</span>)</span><br><span class="line">cv.imshow(<span class="string">&#x27;img2&#x27;</span>, img2)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;img2\n&#x27;</span>, cv.isContourConvex(approx))</span><br></pre></td></tr></table></figure>

<h4 id="（点与轮廓）"><a href="#（点与轮廓）" class="headerlink" title="（点与轮廓）"></a>（点与轮廓）</h4><p>cv.pointPolygonTest()【点到轮廓的距离和点是否在轮廓内】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">hull = cv.convexHull(cont[<span class="number">0</span>])  <span class="comment"># 构造凸包</span></span><br><span class="line">cv.polylines(img, [hull], <span class="literal">True</span>, (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">dista = cv.pointPolygonTest(hull, (<span class="number">300</span>, <span class="number">150</span>), <span class="literal">True</span>)  <span class="comment"># True代表输出点到轮廓的距离</span></span><br><span class="line">distaf = cv.pointPolygonTest(hull, (<span class="number">300</span>, <span class="number">150</span>), <span class="literal">False</span>)  <span class="comment"># False代表输出点是否在轮廓内</span></span><br><span class="line">cv.putText(img, <span class="string">&#x27;A&#x27;</span>, (<span class="number">300</span>, <span class="number">150</span>), cv.FONT_HERSHEY_SIMPLEX, <span class="number">1</span>, (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;distA&#x27;</span>, dista)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;distAf&#x27;</span>, distaf)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">distb = cv.pointPolygonTest(hull, (<span class="number">423</span>, <span class="number">112</span>), <span class="literal">True</span>)  <span class="comment"># True代表输出点到轮廓的距离</span></span><br><span class="line">distbf = cv.pointPolygonTest(hull, (<span class="number">423</span>, <span class="number">112</span>), <span class="literal">False</span>)  <span class="comment"># False代表输出点是否在轮廓内</span></span><br><span class="line">cv.putText(img, <span class="string">&#x27;B&#x27;</span>, (<span class="number">423</span>, <span class="number">112</span>), cv.FONT_HERSHEY_SIMPLEX, <span class="number">1</span>, (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;distB&#x27;</span>, distb)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;distBf&#x27;</span>, distbf)</span><br></pre></td></tr></table></figure>

<h3 id="【形状场景距离】"><a href="#【形状场景距离】" class="headerlink" title="【形状场景距离】"></a>【形状场景距离】</h3><p>cv.createShapeContextDistanceExtractor()【标准形状场景距离算子构造】</p>
<p>cv.createHausdorffDistanceExtractor()【Hausdorff场景距离算子构造】</p>
<p>cv.createShapeContextDistanceExtractor().computeDistance()【标准计算两个形状的距离】</p>
<p>cv.createHausdorffDistanceExtractor().computeDistance()【Hausdorff计算两个形状的距离】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">img1 = cv.imread(pa.join(res, <span class="string">&#x27;Images/Contours/cont1.png&#x27;</span>))</span><br><span class="line">gray1 = cv.cvtColor(img1, cv.COLOR_BGR2GRAY)</span><br><span class="line">ret1, bina1 = cv.threshold(gray1, <span class="number">127</span>, <span class="number">255</span>, cv.THRESH_BINARY)</span><br><span class="line">cont1, hier1 = cv.findContours(bina1, cv.RETR_LIST, cv.CHAIN_APPROX_SIMPLE)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">img2 = cv.imread(pa.join(res, <span class="string">&#x27;Images/Contours/cont2.png&#x27;</span>))</span><br><span class="line">gray2 = cv.cvtColor(img2, cv.COLOR_BGR2GRAY)</span><br><span class="line">ret2, bina2 = cv.threshold(gray2, <span class="number">127</span>, <span class="number">255</span>, cv.THRESH_BINARY)</span><br><span class="line">cont2, hier2 = cv.findContours(bina2, cv.RETR_LIST, cv.CHAIN_APPROX_SIMPLE)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">img3 = cv.imread(pa.join(res, <span class="string">&#x27;Images/Contours/cont3.png&#x27;</span>))</span><br><span class="line">gray3 = cv.cvtColor(img3, cv.COLOR_BGR2GRAY)</span><br><span class="line">ret3, bina3 = cv.threshold(gray3, <span class="number">127</span>, <span class="number">255</span>, cv.THRESH_BINARY)</span><br><span class="line">cont3, hier3 = cv.findContours(bina3, cv.RETR_LIST, cv.CHAIN_APPROX_SIMPLE)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">sd = cv.createShapeContextDistanceExtractor()</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">d1 = sd.computeDistance(cont1[<span class="number">0</span>], cont1[<span class="number">0</span>])  <span class="comment"># 场景距离为0， 图像没有差距</span></span><br><span class="line">d2 = sd.computeDistance(cont1[<span class="number">0</span>], cont2[<span class="number">0</span>])  <span class="comment"># 场景距离为9， 图像没有较大</span></span><br><span class="line">d3 = sd.computeDistance(cont1[<span class="number">0</span>], cont3[<span class="number">0</span>])  <span class="comment"># 场景距离为4， 图像没有较小</span></span><br><span class="line"><span class="comment"># -------------------------------------------------------------------------</span></span><br><span class="line">img1 = cv.imread(pa.join(res, <span class="string">&#x27;Images/Contours/cont1.png&#x27;</span>))</span><br><span class="line">img2 = cv.imread(pa.join(res, <span class="string">&#x27;Images/Contours/cont2.png&#x27;</span>))</span><br><span class="line">img3 = cv.imread(pa.join(res, <span class="string">&#x27;Images/Contours/cont3.png&#x27;</span>))</span><br><span class="line">gray1 = cv.cvtColor(img1, cv.COLOR_BGR2GRAY)</span><br><span class="line">gray2 = cv.cvtColor(img2, cv.COLOR_BGR2GRAY)</span><br><span class="line">gray3 = cv.cvtColor(img3, cv.COLOR_BGR2GRAY)</span><br><span class="line">ret1, bina1 = cv.threshold(gray1, <span class="number">127</span>, <span class="number">255</span>, cv.THRESH_BINARY)</span><br><span class="line">ret2, bina2 = cv.threshold(gray2, <span class="number">127</span>, <span class="number">255</span>, cv.THRESH_BINARY)</span><br><span class="line">ret3, bina3 = cv.threshold(gray3, <span class="number">127</span>, <span class="number">255</span>, cv.THRESH_BINARY)</span><br><span class="line">cont1, hier1 = cv.findContours(bina1, cv.RETR_LIST, cv.CHAIN_APPROX_SIMPLE)</span><br><span class="line">cont2, hier2 = cv.findContours(bina2, cv.RETR_LIST, cv.CHAIN_APPROX_SIMPLE)</span><br><span class="line">cont3, hier3 = cv.findContours(bina3, cv.RETR_LIST, cv.CHAIN_APPROX_SIMPLE)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">hd = cv.createHausdorffDistanceExtractor()</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">d1 = hd.computeDistance(cont1[<span class="number">0</span>], cont1[<span class="number">0</span>])  <span class="comment"># Hausdorff距离为0， 图像没有差距</span></span><br><span class="line">d2 = hd.computeDistance(cont1[<span class="number">0</span>], cont2[<span class="number">0</span>])  <span class="comment"># Hausdorff距离为48， 图像差距大</span></span><br><span class="line">d3 = hd.computeDistance(cont1[<span class="number">0</span>], cont3[<span class="number">0</span>])  <span class="comment"># Hausdorff距离为39， 图像差距小</span></span><br></pre></td></tr></table></figure>

<h3 id="【轮廓特殊值】"><a href="#【轮廓特殊值】" class="headerlink" title="【轮廓特殊值】"></a>【轮廓特殊值】</h3><p>np.nonzero()【找出数组中非零元素的位置】</p>
<p>np.transpose()【将两个数组移项】</p>
<p>cv.findNonZero()【找出数组中非零元素的索引】</p>
<p>cv.minMaxLoc()【最大值最小值及其位置】</p>
<p>cv.mean()【平均颜色平均灰度】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 正矩形框位置和长宽</span></span><br><span class="line">x, y, w, h = cv.boundingRect(cont[<span class="number">0</span>])</span><br><span class="line"><span class="comment"># 宽高比</span></span><br><span class="line">aspectRatio = <span class="built_in">float</span>(w) / h</span><br><span class="line"><span class="comment"># 轮廓面积/正矩形框面积 延展度</span></span><br><span class="line">extend = cv.contourArea(cont[<span class="number">0</span>]) / (w * h)</span><br><span class="line"><span class="comment"># 轮廓面积/凸包面积 凸包度</span></span><br><span class="line">solidity = cv.contourArea(cont[<span class="number">0</span>]) / cv.contourArea(cv.convexHull(cont[<span class="number">0</span>]))</span><br><span class="line"><span class="comment"># 与轮廓面积相等的圆的直径 等效直径</span></span><br><span class="line">equivalent = np.sqrt((<span class="number">4</span> * cv.contourArea(cont[<span class="number">0</span>])) / np.pi)</span><br><span class="line"><span class="comment"># 最优椭圆与势方向(椭圆中心点)(椭圆水平轴与垂直轴长)角度</span></span><br><span class="line">(ellipsex, ellipsey), (horiLen, vertLen), angle = cv.fitEllipse(cont[<span class="number">0</span>])</span><br><span class="line"><span class="comment"># 使用numpy获取轮廓像素点</span></span><br><span class="line">mask1 = np.zeros(gray, dtype=np.uint8)</span><br><span class="line">trans1 = np.transpose(np.nonzero(mask1))</span><br><span class="line"><span class="comment"># 使用cv.findNonZero()获取轮廓像素点</span></span><br><span class="line">trans2 = cv.findNonZero(mask1)</span><br><span class="line"><span class="comment"># 寻找最大值和最小值</span></span><br><span class="line">minVal, maxVal, minLoc, maxLoc = cv.minMaxLoc(gray, mask=mask1)</span><br><span class="line"><span class="comment"># 平均颜色与平均灰度</span></span><br><span class="line">meanVal = cv.mean(img, mask=mask1)</span><br><span class="line"><span class="comment"># 图像位置极点</span></span><br><span class="line">leftmost = <span class="built_in">tuple</span>(cont[<span class="number">0</span>][cont[<span class="number">0</span>][:, :, <span class="number">0</span>].argmin()][<span class="number">0</span>])</span><br><span class="line">rightmost = <span class="built_in">tuple</span>(cont[<span class="number">0</span>][cont[<span class="number">0</span>][:, :, <span class="number">0</span>].argmax()][<span class="number">0</span>])</span><br><span class="line">topmost = <span class="built_in">tuple</span>(cont[<span class="number">0</span>][cont[<span class="number">0</span>][:, :, <span class="number">1</span>].argmin()][<span class="number">0</span>])</span><br><span class="line">bottommost = <span class="built_in">tuple</span>(cont[<span class="number">0</span>][cont[<span class="number">0</span>][:, :, <span class="number">1</span>].argmax()][<span class="number">0</span>])</span><br></pre></td></tr></table></figure>



<h2 id="■（十三）直方图"><a href="#■（十三）直方图" class="headerlink" title="■（十三）直方图"></a>■（十三）直方图</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将图像位数梯度(0~255)设为x轴，像素在该通道每个梯度出现的次数或比例设为y轴，而制成直方图</span></span><br></pre></td></tr></table></figure>

<h3 id="【绘制直方图】"><a href="#【绘制直方图】" class="headerlink" title="【绘制直方图】"></a>【绘制直方图】</h3><p>matplotlib.pyplot.hist()【mat模块直方图绘制】</p>
<p>cv.calcHist【获得直方图信息】</p>
<p>matplotlib.pyplot.plot()【mat模块绘制直方图信息】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/lena.jpg&#x27;</span>))</span><br><span class="line"><span class="comment"># color=&#x27;rgbwcymk&#x27;</span></span><br><span class="line">plt.hist(img.ravel(), <span class="number">256</span>, color=<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">histb = cv.calcHist([img], [<span class="number">0</span>], <span class="literal">None</span>, [<span class="number">256</span>], [<span class="number">0</span>, <span class="number">255</span>])</span><br><span class="line">histg = cv.calcHist([img], [<span class="number">1</span>], <span class="literal">None</span>, [<span class="number">256</span>], [<span class="number">0</span>, <span class="number">255</span>])</span><br><span class="line">histr = cv.calcHist([img], [<span class="number">2</span>], <span class="literal">None</span>, [<span class="number">256</span>], [<span class="number">0</span>, <span class="number">255</span>])</span><br><span class="line">plt.plot(histb, color=<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">plt.plot(histg, color=<span class="string">&#x27;g&#x27;</span>)</span><br><span class="line">plt.plot(histr, color=<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">plt.plot(histb + histg + histr)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h3 id="【直方图加遮罩】"><a href="#【直方图加遮罩】" class="headerlink" title="【直方图加遮罩】"></a>【直方图加遮罩】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/lena.jpg&#x27;</span>))</span><br><span class="line">mask = np.zeros(img.shape[:<span class="number">2</span>], dtype=np.uint8)</span><br><span class="line">mask[<span class="built_in">int</span>(mask.shape[<span class="number">0</span>]/<span class="number">2</span> - <span class="number">100</span>):<span class="built_in">int</span>(mask.shape[<span class="number">0</span>]/<span class="number">2</span> + <span class="number">100</span>), <span class="built_in">int</span>(mask.shape[<span class="number">1</span>]/<span class="number">2</span> - <span class="number">100</span>):<span class="built_in">int</span>(mask.shape[<span class="number">1</span>]/<span class="number">2</span> + <span class="number">100</span>)] = <span class="number">255</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">histb = cv.calcHist([img], [<span class="number">0</span>], <span class="literal">None</span>, [<span class="number">256</span>], [<span class="number">0</span>, <span class="number">255</span>])</span><br><span class="line">histbm = cv.calcHist([img], [<span class="number">0</span>], mask, [<span class="number">256</span>], [<span class="number">0</span>, <span class="number">255</span>])</span><br><span class="line">plt.plot(histb, color=<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">plt.plot(histbm, color=<span class="string">&#x27;g&#x27;</span>)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h3 id="【图像均衡化】"><a href="#【图像均衡化】" class="headerlink" title="【图像均衡化】"></a>【图像均衡化】</h3><p>cv.equalizeHist()【图像均衡化】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/dr.jpg&#x27;</span>), cv.IMREAD_REDUCED_GRAYSCALE_4)</span><br><span class="line">equ = cv.equalizeHist(img)</span><br><span class="line">plt.figure(<span class="string">&#x27;img&#x27;</span>)</span><br><span class="line">plt.hist(img.ravel(), <span class="number">256</span>)</span><br><span class="line">plt.figure(<span class="string">&#x27;equ&#x27;</span>)</span><br><span class="line">plt.hist(equ.ravel(), <span class="number">256</span>)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h3 id="【matplotlib的绘图介绍】"><a href="#【matplotlib的绘图介绍】" class="headerlink" title="【matplotlib的绘图介绍】"></a>【matplotlib的绘图介绍】</h3><p>matplotlib.pyplot.figure()【开启一个pyplot窗口】</p>
<p>matplotlib.pyplot.subplot()【在pyplot窗口里添加子对象】</p>
<p>matplotlib.pyplot.show()【显示pyplot窗口】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/dr.jpg&#x27;</span>), cv.IMREAD_REDUCED_GRAYSCALE_4)</span><br><span class="line">equ = cv.equalizeHist(img)</span><br><span class="line">plt.figure(<span class="string">&#x27;img&#x27;</span>)  <span class="comment"># 开启一个pyplot窗口</span></span><br><span class="line"><span class="comment"># pyplot窗口显示：subplot(几行，几列，第几个位置)，显示的内容</span></span><br><span class="line">plt.subplot(<span class="number">1</span>, <span class="number">4</span>, <span class="number">1</span>), plt.hist(img.ravel(), <span class="number">256</span>)</span><br><span class="line">plt.subplot(<span class="number">1</span>, <span class="number">4</span>, <span class="number">2</span>), plt.hist(equ.ravel(), <span class="number">256</span>)</span><br><span class="line">plt.subplot(<span class="number">1</span>, <span class="number">4</span>, <span class="number">3</span>), plt.imshow(cv.cvtColor(img, cv.COLOR_BGR2RGB))</span><br><span class="line">plt.subplot(<span class="number">1</span>, <span class="number">4</span>, <span class="number">4</span>), plt.imshow(cv.cvtColor(equ, cv.COLOR_BGR2RGB))</span><br><span class="line">plt.show()  <span class="comment"># pyplot显示</span></span><br></pre></td></tr></table></figure>



<h2 id="■（十四）傅里叶变换"><a href="#■（十四）傅里叶变换" class="headerlink" title="■（十四）傅里叶变换"></a>■（十四）傅里叶变换</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将图像转成正弦余弦波-&gt;即傅里叶变换</span></span><br><span class="line"><span class="comment"># 将正弦余弦波转成图像-&gt;即逆傅里叶变换</span></span><br><span class="line"><span class="comment"># 在傅里叶变换与逆傅里叶变换中，将正弦余弦波修改-&gt;即图像的高低通处理</span></span><br></pre></td></tr></table></figure>

<h3 id="【FFT傅里叶变换】"><a href="#【FFT傅里叶变换】" class="headerlink" title="【FFT傅里叶变换】"></a>【FFT傅里叶变换】</h3><p>numpy.fft.fft2()【傅里叶变换】</p>
<p>numpy.fft.fftshift()【矫正傅里叶变换】</p>
<p>numpy.fft.ifft2()【逆傅里叶变换】</p>
<p>numpy.fft.ifftshift()【逆矫正傅里叶变换】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/dr.jpg&#x27;</span>), <span class="number">0</span>)</span><br><span class="line"><span class="comment"># 傅里叶变换</span></span><br><span class="line">f = np.fft.fft2(img)  <span class="comment"># 傅里叶变换生成一个复数数组</span></span><br><span class="line">fshift = np.fft.fftshift(f)  <span class="comment"># 将零频率成分移动到图像的中心位置</span></span><br><span class="line"><span class="comment"># 逆傅里叶变换</span></span><br><span class="line">ishift = np.fft.ifftshift(fshift)</span><br><span class="line">iimg = np.fft.ifft2(ishift)</span><br><span class="line"><span class="comment"># 显示原图</span></span><br><span class="line">plt.subplot(<span class="number">131</span>), plt.imshow(img, cmap=<span class="string">&#x27;gray&#x27;</span>), plt.title(<span class="string">&#x27;original&#x27;</span>), plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line"><span class="comment"># 显示傅里叶频谱图</span></span><br><span class="line">spectrum = <span class="number">20</span> * np.log(np.<span class="built_in">abs</span>(fshift))</span><br><span class="line">plt.subplot(<span class="number">132</span>), plt.imshow(spectrum, cmap=<span class="string">&#x27;gray&#x27;</span>), plt.title(<span class="string">&#x27;result&#x27;</span>), plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line"><span class="comment"># 显示逆傅里叶图像</span></span><br><span class="line">iimg = np.<span class="built_in">abs</span>(iimg)</span><br><span class="line">plt.subplot(<span class="number">133</span>), plt.imshow(iimg, cmap=<span class="string">&#x27;gray&#x27;</span>), plt.title(<span class="string">&#x27;iimg&#x27;</span>), plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h3 id="【二维高通低通处理】"><a href="#【二维高通低通处理】" class="headerlink" title="【二维高通低通处理】"></a>【二维高通低通处理】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/dr.jpg&#x27;</span>), <span class="number">0</span>)</span><br><span class="line"><span class="comment"># 傅里叶变换</span></span><br><span class="line">f = np.fft.fft2(img)  <span class="comment"># 傅里叶变换生成一个复数数组</span></span><br><span class="line">fshift = np.fft.fftshift(f)  <span class="comment"># 将零频率成分移动到图像的中心位置</span></span><br><span class="line"><span class="comment"># 计算高低通</span></span><br><span class="line">r, c = img.shape  <span class="comment"># 原始图像尺寸</span></span><br><span class="line">rh, ch = <span class="built_in">int</span>(r/<span class="number">2</span>), <span class="built_in">int</span>(c/<span class="number">2</span>)  <span class="comment"># 图像一半尺寸</span></span><br><span class="line">deg = <span class="number">2</span>  <span class="comment"># 遮罩大小比例</span></span><br><span class="line"><span class="comment"># xoff, yoff = 248.5, 351  # 遮罩偏移</span></span><br><span class="line">xoff, yoff = <span class="number">0</span>, <span class="number">0</span>  <span class="comment"># 遮罩偏移</span></span><br><span class="line">mask1 = np.ones(img.shape, dtype=np.uint8)  <span class="comment"># 低通</span></span><br><span class="line">mask1[<span class="built_in">int</span>(rh - rh/deg + yoff):<span class="built_in">int</span>(rh + rh/deg + yoff), <span class="built_in">int</span>(ch - ch/deg + xoff):<span class="built_in">int</span>(ch + ch/deg + xoff)] = <span class="number">0</span></span><br><span class="line">mask2 = np.zeros(img.shape, dtype=np.uint8)  <span class="comment"># 高通</span></span><br><span class="line">mask2[<span class="built_in">int</span>(rh - rh/deg + yoff):<span class="built_in">int</span>(rh + rh/deg + yoff), <span class="built_in">int</span>(ch - ch/deg + xoff):<span class="built_in">int</span>(ch + ch/deg + xoff)] = <span class="number">1</span></span><br><span class="line"><span class="comment"># fshift = fshift * mask1  # 在这里乘上mask1(低通/显示模糊)或者mask2(高通/显示边缘)</span></span><br><span class="line"><span class="comment"># 逆傅里叶变换</span></span><br><span class="line">ishift = np.fft.ifftshift(fshift)</span><br><span class="line">iimg = np.fft.ifft2(ishift)</span><br><span class="line"><span class="comment"># 显示原图</span></span><br><span class="line">plt.subplot(<span class="number">131</span>), plt.imshow(img, cmap=<span class="string">&#x27;gray&#x27;</span>), plt.title(<span class="string">&#x27;original&#x27;</span>), plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line"><span class="comment"># 显示傅里叶频谱图</span></span><br><span class="line">spectrum = <span class="number">20</span> * np.log(np.<span class="built_in">abs</span>(fshift) + <span class="number">10</span>**-<span class="number">5</span>)</span><br><span class="line">plt.subplot(<span class="number">132</span>), plt.imshow(spectrum, cmap=<span class="string">&#x27;gray&#x27;</span>), plt.title(<span class="string">&#x27;result&#x27;</span>), plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line"><span class="comment"># 显示逆傅里叶图像</span></span><br><span class="line">iimg = np.<span class="built_in">abs</span>(iimg)</span><br><span class="line">plt.subplot(<span class="number">133</span>), plt.imshow(iimg, cmap=<span class="string">&#x27;gray&#x27;</span>), plt.title(<span class="string">&#x27;iimg&#x27;</span>), plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>



<h2 id="■（十五）模板匹配"><a href="#■（十五）模板匹配" class="headerlink" title="■（十五）模板匹配"></a>■（十五）模板匹配</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将模板图在扫描图里扫描，记录相似比对比例，即模板匹配</span></span><br></pre></td></tr></table></figure>

<h3 id="【单模板单匹配结构】"><a href="#【单模板单匹配结构】" class="headerlink" title="【单模板单匹配结构】"></a>【单模板单匹配结构】</h3><p>cv.matchTemplate()【模板匹配】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/dr.jpg&#x27;</span>), <span class="number">1</span>)</span><br><span class="line">temp = cv.imread(pa.join(res, <span class="string">&#x27;Images/Template/dr_t1.png&#x27;</span>), <span class="number">1</span>)</span><br><span class="line">img = cv.cvtColor(img, cv.COLOR_BGR2RGB)</span><br><span class="line">temp = cv.cvtColor(temp, cv.COLOR_BGR2RGB)</span><br><span class="line">rv = cv.matchTemplate(img, temp, cv.TM_SQDIFF)  <span class="comment"># 模板匹配</span></span><br><span class="line">minVal, maxVal, minLoc, maxLoc = cv.minMaxLoc(rv)  <span class="comment"># 求极值</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;minVal\n&#x27;</span>, minVal)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;maxVal\n&#x27;</span>, maxVal)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">th, tw = temp.shape[:<span class="number">2</span>]  <span class="comment"># 模板图大小</span></span><br><span class="line">topLeft = minLoc  <span class="comment"># 方框左上角</span></span><br><span class="line">bottomRight = (topLeft[<span class="number">0</span>] + tw, topLeft[<span class="number">1</span>] + th)  <span class="comment"># 方框右下角</span></span><br><span class="line">cv.rectangle(img, topLeft, bottomRight, <span class="number">255</span>, <span class="number">2</span>)  <span class="comment"># 在匹配位置画方框</span></span><br></pre></td></tr></table></figure>

<h3 id="【单模板多匹配结构】"><a href="#【单模板多匹配结构】" class="headerlink" title="【单模板多匹配结构】"></a>【单模板多匹配结构】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/Template/dr_t3.png&#x27;</span>), <span class="number">1</span>)</span><br><span class="line">temp = cv.imread(pa.join(res, <span class="string">&#x27;Images/Template/dr_t1.png&#x27;</span>), <span class="number">1</span>)</span><br><span class="line">temp = cv.GaussianBlur(temp, (<span class="number">1</span>, <span class="number">1</span>), <span class="number">6</span>, <span class="number">4</span>)</span><br><span class="line">img = cv.cvtColor(img, cv.COLOR_BGR2RGB)</span><br><span class="line">temp = cv.cvtColor(temp, cv.COLOR_BGR2RGB)</span><br><span class="line">res = cv.matchTemplate(img, temp, cv.TM_CCOEFF_NORMED)  <span class="comment"># 模板匹配返回0~1之间的匹配值</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">h, w = temp.shape[:<span class="number">2</span>]  <span class="comment"># 模板图大小</span></span><br><span class="line">threshold = <span class="number">0.9</span>  <span class="comment"># 阈值设定值0~1</span></span><br><span class="line">loc = np.where(res &gt;= threshold)  <span class="comment"># 在模板匹配中，满足大于等于阈值的值的坐标y和x</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># loc里只有两个数y和x，用[::-1]转成x和y，并用*将列表转化成zip的位置实参</span></span><br><span class="line"><span class="keyword">for</span> pos <span class="keyword">in</span> <span class="built_in">zip</span>(*loc[::-<span class="number">1</span>]):  <span class="comment"># pos记录匹配到的图像的左上角坐标(x, y)</span></span><br><span class="line">    cv.rectangle(img, pos, (pos[<span class="number">0</span>] + w, pos[<span class="number">1</span>] + h), <span class="number">255</span>, <span class="number">1</span>)</span><br></pre></td></tr></table></figure>



<h2 id="■（十六）霍夫变换"><a href="#■（十六）霍夫变换" class="headerlink" title="■（十六）霍夫变换"></a>■（十六）霍夫变换</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在图像里找直线即霍夫变换</span></span><br></pre></td></tr></table></figure>

<h3 id="【霍夫变换】"><a href="#【霍夫变换】" class="headerlink" title="【霍夫变换】"></a>【霍夫变换】</h3><p>cv.HoughLines()【霍夫直线】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/fractal.png&#x27;</span>), <span class="number">1</span>)</span><br><span class="line">img = cv.cvtColor(img, cv.COLOR_BGR2RGB)</span><br><span class="line">gray = cv.cvtColor(img, cv.COLOR_RGB2GRAY)</span><br><span class="line">edge = cv.Canny(gray, <span class="number">200</span>, <span class="number">255</span>, apertureSize=<span class="number">3</span>)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">houghs = cv.HoughLines(edge, <span class="number">1</span>, np.pi/<span class="number">180</span>, <span class="number">300</span>)</span><br><span class="line">blank = np.zeros(img.shape, dtype=np.uint8)  <span class="comment"># 在一张黑色画布上显示</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">for</span> h <span class="keyword">in</span> houghs:</span><br><span class="line">        r, t = h[<span class="number">0</span>]</span><br><span class="line">        cost, sint = np.cos(t), np.sin(t)</span><br><span class="line">        x0, y0 = cost * r, sint * r  <span class="comment"># 直线中心坐标</span></span><br><span class="line">        x1, y1 = <span class="built_in">int</span>(x0 + <span class="number">10</span> ** <span class="number">4</span> * (-sint)), <span class="built_in">int</span>(y0 + <span class="number">10</span> ** <span class="number">4</span> * cost)  <span class="comment"># 直线起始坐标</span></span><br><span class="line">        x2, y2 = <span class="built_in">int</span>(x0 - <span class="number">10</span> ** <span class="number">4</span> * (-sint)), <span class="built_in">int</span>(y0 - <span class="number">10</span> ** <span class="number">4</span> * cost)  <span class="comment"># 直线终点坐标</span></span><br><span class="line">        cv.line(blank, (x1, y1), (x2, y2), (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">1</span>)</span><br><span class="line"><span class="keyword">except</span> TypeError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;no Number&#x27;</span>)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">plt.subplot(<span class="number">121</span>), plt.imshow(edge, cmap=<span class="string">&#x27;gray&#x27;</span>), plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">122</span>), plt.imshow(blank, cmap=<span class="string">&#x27;gray&#x27;</span>), plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h3 id="【概率霍夫变换】"><a href="#【概率霍夫变换】" class="headerlink" title="【概率霍夫变换】"></a>【概率霍夫变换】</h3><p>cv.HoughLinesP()【概率霍夫直线】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/fractal.png&#x27;</span>), <span class="number">1</span>)</span><br><span class="line">img = cv.cvtColor(img, cv.COLOR_BGR2RGB)</span><br><span class="line">gray = cv.cvtColor(img, cv.COLOR_RGB2GRAY)</span><br><span class="line">edge = cv.Canny(gray, <span class="number">50</span>, <span class="number">150</span>, apertureSize=<span class="number">3</span>)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># cv.HoughLinesP(接受检测的八位二值图，距离r精度，角度θ精度，线检测阈值，接受直线最小长度，一条线中两个点的最大间隔)</span></span><br><span class="line">houghs = cv.HoughLinesP(edge, <span class="number">1</span>, np.pi/<span class="number">180</span>, <span class="number">1</span>, minLineLength=img.shape[<span class="number">0</span>]/<span class="number">10</span>, maxLineGap=<span class="number">20</span>)</span><br><span class="line">blank = np.zeros(img.shape, dtype=np.uint8)  <span class="comment"># 在一张黑色画布上显示</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">for</span> h <span class="keyword">in</span> houghs:</span><br><span class="line">        x1, y1, x2, y2 = h[<span class="number">0</span>]</span><br><span class="line">        cv.line(blank, (x1, y1), (x2, y2), (<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">1</span>)</span><br><span class="line"><span class="keyword">except</span> TypeError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;no Number&#x27;</span>)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">plt.subplot(<span class="number">131</span>), plt.imshow(img, cmap=<span class="string">&#x27;gray&#x27;</span>), plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">132</span>), plt.imshow(edge, cmap=<span class="string">&#x27;gray&#x27;</span>), plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">133</span>), plt.imshow(blank, cmap=<span class="string">&#x27;gray&#x27;</span>), plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h3 id="【霍夫圆环变换】"><a href="#【霍夫圆环变换】" class="headerlink" title="【霍夫圆环变换】"></a>【霍夫圆环变换】</h3><p>cv.HoughCircles()【霍夫圆环】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/dr.jpg&#x27;</span>), <span class="number">1</span>)</span><br><span class="line">img = cv.cvtColor(img, cv.COLOR_BGR2RGB)</span><br><span class="line">gray = cv.cvtColor(img, cv.COLOR_RGB2GRAY)</span><br><span class="line">gray = cv.medianBlur(gray, <span class="number">5</span>)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ruler = int((img.shape[0] * img.shape[1]) / 50000)  # 取一个与图像分辨率相关的大小用来适应不同分辨率图像</span></span><br><span class="line">ruler = <span class="built_in">max</span>(img.shape[<span class="number">0</span>], img.shape[<span class="number">1</span>]) / <span class="number">50</span></span><br><span class="line"><span class="built_in">print</span>(ruler)</span><br><span class="line"><span class="comment"># cv.HoughCircles(接受检测的八位灰度图，模式，累计器分辨率默认1，两个圆心间的最小间距，</span></span><br><span class="line"><span class="comment">#                Canny高阈值(低阈值为其一半)，圆的数量阈值，圆半径最小值，圆半径最大值)</span></span><br><span class="line">houghs = cv.HoughCircles(gray, cv.HOUGH_GRADIENT, <span class="number">1</span>, <span class="built_in">int</span>(ruler),</span><br><span class="line">                         param1=<span class="number">127</span>, param2=<span class="number">30</span>, minRadius=<span class="built_in">int</span>(ruler * <span class="number">1</span>), maxRadius=<span class="built_in">int</span>(ruler * <span class="number">3</span>))</span><br><span class="line"><span class="keyword">try</span>:  <span class="comment"># 尝试获取houghs里的[[[圆坐标x, 圆坐标y, 圆半径r]]]</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> houghs[<span class="number">0</span>, :]:</span><br><span class="line">        cv.circle(img, (<span class="built_in">int</span>(i[<span class="number">0</span>]), <span class="built_in">int</span>(i[<span class="number">1</span>])), <span class="built_in">int</span>(i[<span class="number">2</span>]), (<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">1</span>)</span><br><span class="line">        cv.circle(img, (<span class="built_in">int</span>(i[<span class="number">0</span>]), <span class="built_in">int</span>(i[<span class="number">1</span>])), <span class="number">2</span>, (<span class="number">0</span>, <span class="number">255</span>, <span class="number">255</span>), <span class="number">2</span>)</span><br><span class="line"><span class="keyword">except</span> TypeError:  <span class="comment"># 如果找不到</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;no Number&#x27;</span>)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">plt.subplot(<span class="number">121</span>), plt.imshow(gray, cmap=<span class="string">&#x27;gray&#x27;</span>), plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">122</span>), plt.imshow(img, cmap=<span class="string">&#x27;gray&#x27;</span>), plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>



<h2 id="■（十七）图像提取"><a href="#■（十七）图像提取" class="headerlink" title="■（十七）图像提取"></a>■（十七）图像提取</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 就是抠图而已</span></span><br></pre></td></tr></table></figure>

<h3 id="【前景与背景】"><a href="#【前景与背景】" class="headerlink" title="【前景与背景】"></a>【前景与背景】</h3><p>cv.distanceTransform()【计算二值图中白色到黑色的距离】</p>
<p>cv.DIST_USER (自定义距离)</p>
<p>cv.DIST_L2 (欧几里得距离)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/zt.jpg&#x27;</span>), <span class="number">1</span>)</span><br><span class="line">imgrgb = cv.cvtColor(img, cv.COLOR_BGR2RGB)</span><br><span class="line">gray = cv.cvtColor(imgrgb, cv.COLOR_RGB2GRAY)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">ret, thresh = cv.threshold(gray, <span class="number">150</span>, <span class="number">255</span>, cv.THRESH_BINARY)  <span class="comment"># 灰度图的阈值 + cv.THRESH_OTSU</span></span><br><span class="line">kernel = np.ones((<span class="number">3</span>, <span class="number">3</span>), dtype=np.uint8)  <span class="comment"># 形态卷积核</span></span><br><span class="line">openex = cv.morphologyEx(thresh, cv.MORPH_OPEN, kernel, iterations=<span class="number">2</span>)  <span class="comment"># 开运算去噪</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># backward</span></span><br><span class="line">backward = cv.dilate(openex, kernel, iterations=<span class="number">3</span>)  <span class="comment"># 膨胀</span></span><br><span class="line"><span class="comment"># dist</span></span><br><span class="line">dist = cv.distanceTransform(openex, cv.DIST_L2, <span class="number">5</span>)  <span class="comment"># 距离  3或5</span></span><br><span class="line"><span class="comment"># forward</span></span><br><span class="line">ret2, forward = cv.threshold(dist, <span class="number">0.1</span> * dist.<span class="built_in">max</span>(), <span class="number">255</span>, <span class="number">0</span>)  <span class="comment"># 距离图的阈值</span></span><br><span class="line">forward = np.uint8(forward)  <span class="comment"># 将float32转为uint8</span></span><br><span class="line"><span class="comment"># 不确定范围</span></span><br><span class="line">un = cv.subtract(backward, forward)</span><br><span class="line"><span class="comment"># marker</span></span><br><span class="line">retMark, markers = cv.connectedComponents(forward)</span><br><span class="line">markers = markers + <span class="number">1</span>  <span class="comment"># 将标注整体提亮1</span></span><br><span class="line">markers[un == <span class="number">255</span>] = <span class="number">0</span>  <span class="comment"># 将不确定范围标注为0</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">plt.subplot(<span class="number">241</span>), plt.imshow(imgrgb, cmap=<span class="string">&#x27;gray&#x27;</span>), plt.axis(<span class="string">&#x27;off&#x27;</span>), plt.title(<span class="string">&#x27;RGB/Original&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">242</span>), plt.imshow(openex, cmap=<span class="string">&#x27;gray&#x27;</span>), plt.axis(<span class="string">&#x27;off&#x27;</span>), plt.title(<span class="string">&#x27;Threshold/Open&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">243</span>), plt.imshow(backward, cmap=<span class="string">&#x27;gray&#x27;</span>), plt.axis(<span class="string">&#x27;off&#x27;</span>), plt.title(<span class="string">&#x27;BackGround/Dilate&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">244</span>), plt.imshow(dist, cmap=<span class="string">&#x27;gray&#x27;</span>), plt.axis(<span class="string">&#x27;off&#x27;</span>), plt.title(<span class="string">&#x27;Distance/Open&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">245</span>), plt.imshow(forward, cmap=<span class="string">&#x27;gray&#x27;</span>), plt.axis(<span class="string">&#x27;off&#x27;</span>), plt.title(<span class="string">&#x27;Distance/Threshold&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">246</span>), plt.imshow(markers, cmap=<span class="string">&#x27;gray&#x27;</span>), plt.axis(<span class="string">&#x27;off&#x27;</span>), plt.title(<span class="string">&#x27;markers&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">247</span>), plt.imshow(un, cmap=<span class="string">&#x27;gray&#x27;</span>), plt.axis(<span class="string">&#x27;off&#x27;</span>), plt.title(<span class="string">&#x27;Uncertain&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h3 id="【分水岭算法】"><a href="#【分水岭算法】" class="headerlink" title="【分水岭算法】"></a>【分水岭算法】</h3><p>cv.connectedComponents()【二值图标注相连部分为同一色阶】</p>
<p>cv.watershed()【分水岭算法】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/zt.jpg&#x27;</span>), <span class="number">1</span>)</span><br><span class="line">imgrgb = cv.cvtColor(img, cv.COLOR_BGR2RGB)</span><br><span class="line">gray = cv.cvtColor(imgrgb, cv.COLOR_RGB2GRAY)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">ret, thresh = cv.threshold(gray, <span class="number">150</span>, <span class="number">255</span>, cv.THRESH_BINARY)  <span class="comment"># 灰度图的阈值 + cv.THRESH_OTSU</span></span><br><span class="line">kernel = np.ones((<span class="number">3</span>, <span class="number">3</span>), dtype=np.uint8)  <span class="comment"># 形态卷积核</span></span><br><span class="line">openex = cv.morphologyEx(thresh, cv.MORPH_OPEN, kernel, iterations=<span class="number">2</span>)  <span class="comment"># 开运算去噪</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># backward背景</span></span><br><span class="line">backward = cv.dilate(openex, kernel, iterations=<span class="number">3</span>)  <span class="comment"># 膨胀</span></span><br><span class="line"><span class="comment"># dist距离</span></span><br><span class="line">dist = cv.distanceTransform(openex, cv.DIST_L2, <span class="number">5</span>)  <span class="comment"># 距离</span></span><br><span class="line"><span class="comment"># forward前景</span></span><br><span class="line">ret2, forward = cv.threshold(dist, <span class="number">0.1</span> * dist.<span class="built_in">max</span>(), <span class="number">255</span>, <span class="number">0</span>)  <span class="comment"># 距离图的阈值</span></span><br><span class="line">forward = np.uint8(forward)  <span class="comment"># 将float32转为uint8</span></span><br><span class="line"><span class="comment"># unknown背景-前景</span></span><br><span class="line">unknown = cv.subtract(backward, forward)</span><br><span class="line"><span class="comment"># marker前景标注</span></span><br><span class="line">retMark, markers = cv.connectedComponents(forward)</span><br><span class="line">markers = markers + <span class="number">1</span>  <span class="comment"># 将标注整体提亮1</span></span><br><span class="line">markers[unknown == <span class="number">255</span>] = <span class="number">0</span>  <span class="comment"># 将不确定范围标注为0</span></span><br><span class="line"><span class="comment"># watershed分水岭</span></span><br><span class="line">imgws = imgrgb.copy()</span><br><span class="line">waterShed = cv.watershed(imgws, markers.copy())</span><br><span class="line">imgws[waterShed == -<span class="number">1</span>] = [<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>]</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">plt.subplot(<span class="number">241</span>), plt.imshow(imgrgb, cmap=<span class="string">&#x27;gray&#x27;</span>), plt.axis(<span class="string">&#x27;off&#x27;</span>), plt.title(<span class="string">&#x27;RGB/Original&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">242</span>), plt.imshow(openex, cmap=<span class="string">&#x27;gray&#x27;</span>), plt.axis(<span class="string">&#x27;off&#x27;</span>), plt.title(<span class="string">&#x27;Threshold/Open&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">243</span>), plt.imshow(backward, cmap=<span class="string">&#x27;gray&#x27;</span>), plt.axis(<span class="string">&#x27;off&#x27;</span>), plt.title(<span class="string">&#x27;Backward/Dilate&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">244</span>), plt.imshow(dist, cmap=<span class="string">&#x27;gray&#x27;</span>), plt.axis(<span class="string">&#x27;off&#x27;</span>), plt.title(<span class="string">&#x27;Distance/Open&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">245</span>), plt.imshow(forward, cmap=<span class="string">&#x27;gray&#x27;</span>), plt.axis(<span class="string">&#x27;off&#x27;</span>), plt.title(<span class="string">&#x27;Forward/Threshold&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">246</span>), plt.imshow(unknown, cmap=<span class="string">&#x27;gray&#x27;</span>), plt.axis(<span class="string">&#x27;off&#x27;</span>), plt.title(<span class="string">&#x27;Backward - Forward&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">247</span>), plt.imshow(markers, cmap=<span class="string">&#x27;gray&#x27;</span>), plt.axis(<span class="string">&#x27;off&#x27;</span>), plt.title(<span class="string">&#x27;markers&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">248</span>), plt.imshow(imgws, cmap=<span class="string">&#x27;gray&#x27;</span>), plt.axis(<span class="string">&#x27;off&#x27;</span>), plt.title(<span class="string">&#x27;WaterShed&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h3 id="【方框前景提取】"><a href="#【方框前景提取】" class="headerlink" title="【方框前景提取】"></a>【方框前景提取】</h3><p>cv.grabCut()【前景提取】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/yw.png&#x27;</span>), <span class="number">1</span>)</span><br><span class="line">imgrgb = cv.cvtColor(img, cv.COLOR_BGR2RGB)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">mask = np.zeros(img.shape[:<span class="number">2</span>], dtype=np.uint8)  <span class="comment"># 与原图等大的遮罩</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">bgModel = np.zeros((<span class="number">1</span>, <span class="number">65</span>), dtype=np.float64)  <span class="comment"># 1行64列的64位数组</span></span><br><span class="line">fgModel = np.zeros((<span class="number">1</span>, <span class="number">65</span>), dtype=np.float64)  <span class="comment"># 1行64列的64位数组</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">border = <span class="number">1</span>  <span class="comment"># 矩形框边界宽</span></span><br><span class="line">rectBorder = (border, border, img.shape[<span class="number">1</span>]-border*<span class="number">2</span>, img.shape[<span class="number">0</span>]-border*<span class="number">2</span>)  <span class="comment"># 矩形框x y w h</span></span><br><span class="line"><span class="comment"># grabcut运算</span></span><br><span class="line">mask, bg, fg = cv.grabCut(img, mask, rectBorder, bgModel, fgModel, <span class="number">10</span>, cv.GC_INIT_WITH_RECT)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># mask在grabcut运算之后，成为拥有0 1 2三个数的三值图</span></span><br><span class="line"><span class="comment"># mask中将 框内背景(2) 和 框外背景(0) 设为0，将余下的 框内前景(1) 设为1</span></span><br><span class="line">mask2 = np.where((mask == <span class="number">2</span>) | (mask == <span class="number">0</span>), <span class="number">0</span>, <span class="number">1</span>).astype(<span class="string">&#x27;uint8&#x27;</span>)  <span class="comment"># 将int32转为uint8</span></span><br><span class="line">cut = img * mask2[:, :, np.newaxis]  <span class="comment"># 将原图按遮罩内容(前景)扣下来</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">cut = cv.cvtColor(cut, cv.COLOR_BGR2RGB)</span><br><span class="line">plt.subplot(<span class="number">141</span>), plt.imshow(imgrgb)</span><br><span class="line">plt.subplot(<span class="number">142</span>), plt.imshow(mask, cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">143</span>), plt.imshow(mask2, cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">144</span>), plt.imshow(cut)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h3 id="【交互式前景提取】"><a href="#【交互式前景提取】" class="headerlink" title="【交互式前景提取】"></a>【交互式前景提取】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">img = cv.imread(pa.join(res, <span class="string">&#x27;Images/yw.png&#x27;</span>), <span class="number">1</span>)</span><br><span class="line">imgrgb = cv.cvtColor(img, cv.COLOR_BGR2RGB)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">mask = np.zeros(img.shape[:<span class="number">2</span>], dtype=np.uint8)  <span class="comment"># 与原图等大的遮罩</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">bgModel = np.zeros((<span class="number">1</span>, <span class="number">65</span>), dtype=np.float64)  <span class="comment"># 1行64列的64位数组</span></span><br><span class="line">fgModel = np.zeros((<span class="number">1</span>, <span class="number">65</span>), dtype=np.float64)  <span class="comment"># 1行64列的64位数组</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">border = <span class="number">1</span>  <span class="comment"># 矩形框边界宽</span></span><br><span class="line">rectBorder = (border, border, img.shape[<span class="number">1</span>]-border*<span class="number">2</span>, img.shape[<span class="number">0</span>]-border*<span class="number">2</span>)  <span class="comment"># 矩形框x y w h</span></span><br><span class="line"><span class="comment"># 第一次grabcut运算</span></span><br><span class="line">mask, bg1, fg1 = cv.grabCut(img, mask, rectBorder, bgModel, fgModel, <span class="number">10</span>, cv.GC_INIT_WITH_RECT)</span><br><span class="line"><span class="comment"># 将交互图里黑色白色取出，手动设置在遮罩图上</span></span><br><span class="line">maskcut = cv.imread(pa.join(res, <span class="string">&#x27;Images/yw_cut.png&#x27;</span>), <span class="number">0</span>)</span><br><span class="line">mask[maskcut == <span class="number">0</span>] = <span class="number">0</span></span><br><span class="line">mask[maskcut == <span class="number">255</span>] = <span class="number">1</span></span><br><span class="line"><span class="comment"># 第二次grabcut运算</span></span><br><span class="line">mask, bg2, fg2 = cv.grabCut(img, mask, <span class="literal">None</span>, bgModel, fgModel, <span class="number">10</span>, cv.GC_INIT_WITH_MASK)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># mask在grabcut运算之后，成为拥有0 1 2三个数的三值图</span></span><br><span class="line"><span class="comment"># mask中将 框内背景(2) 和 框外背景(0) 设为0，将余下的 框内前景(1) 设为1</span></span><br><span class="line">mask2 = np.where((mask == <span class="number">2</span>) | (mask == <span class="number">0</span>), <span class="number">0</span>, <span class="number">1</span>).astype(<span class="string">&#x27;uint8&#x27;</span>)  <span class="comment"># 将int32转为uint8</span></span><br><span class="line">cut = img * mask2[:, :, np.newaxis]  <span class="comment"># 将原图按遮罩内容(前景)扣下来</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">cut = cv.cvtColor(cut, cv.COLOR_BGR2RGB)</span><br><span class="line">plt.subplot(<span class="number">241</span>), plt.imshow(imgrgb)</span><br><span class="line">plt.subplot(<span class="number">242</span>), plt.imshow(maskcut, cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">243</span>), plt.imshow(mask, cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">244</span>), plt.imshow(mask2, cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">245</span>), plt.imshow(cut)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h2 id="■（十八）视频处理"><a href="#■（十八）视频处理" class="headerlink" title="■（十八）视频处理"></a>■（十八）视频处理</h2><h3 id="【主要函数】"><a href="#【主要函数】" class="headerlink" title="【主要函数】"></a>【主要函数】</h3><p>cv.VideoCapture()【视频类构造】</p>
<p>cv.VideoCapture.isOpened【初始化是否成功】</p>
<p>cv.VideoCapture.open()【打开视频】</p>
<p>cv.VideoCapture.read()【读取视频信息】</p>
<p>cv.VideoCapture.release()【释放视频类】</p>
<p>cv.VideoCapture.get()【获取属性】</p>
<p>cv.VideoCapture.set()【设置属性】</p>
<p>cv.VideoCapture.grab()【指向下一帧】</p>
<p>cv.VideoCapture.retrieve()【解码本帧】</p>
<p>cv.VideoWriter()【视频写入类构造】</p>
<p>cv.VideoWriter_fourcc()【指定视频编码格式】</p>
<p>cv.VideoWriter.write()【写入下一帧视频】</p>
<p>cv.VideoWriter.release()【释放视频写入类】</p>
<h3 id="【视频处理模板】"><a href="#【视频处理模板】" class="headerlink" title="【视频处理模板】"></a>【视频处理模板】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> os.path <span class="keyword">as</span> pa</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="comment"># -----------------------------------------</span></span><br><span class="line">res = <span class="string">&#x27;../../AssetResources&#x27;</span>  <span class="comment"># pa.join(res, &#x27;Videos/&#x27;)</span></span><br><span class="line"><span class="comment"># -----------------------------------------</span></span><br><span class="line">cap = cv.VideoCapture(pa.join(res, <span class="string">&#x27;Videos/video1.mp4&#x27;</span>))  <span class="comment"># pa.join(res, &#x27;Videos/video1.mp4&#x27;)</span></span><br><span class="line">capResolution = (<span class="built_in">int</span>(cap.get(<span class="number">3</span>)), <span class="built_in">int</span>(cap.get(<span class="number">4</span>)))  <span class="comment"># 3-&gt;width 4-&gt;height</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">resolution = capResolution</span><br><span class="line">fps = <span class="number">30</span></span><br><span class="line">cap.<span class="built_in">set</span>(<span class="number">3</span>, resolution[<span class="number">0</span>]), cap.<span class="built_in">set</span>(<span class="number">4</span>, resolution[<span class="number">1</span>])</span><br><span class="line">fourcc = cv.VideoWriter_fourcc(*<span class="string">&#x27;DIVX&#x27;</span>)  <span class="comment"># MJPG-.avi/DIVX-.mp4/FLV1-.flv/8BPS-.mov</span></span><br><span class="line">output = cv.VideoWriter(pa.join(res, <span class="string">&#x27;Videos/video2.mp4&#x27;</span>), fourcc, <span class="number">30</span>, resolution, isColor=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># -----------------------------------------</span></span><br><span class="line"><span class="keyword">while</span> cap.isOpened():</span><br><span class="line">    ret, frame = cap.read()</span><br><span class="line">    <span class="keyword">if</span> ret:</span><br><span class="line">        frame = cv.flip(frame, <span class="number">0</span>)</span><br><span class="line">        <span class="comment"># ---------------------------------</span></span><br><span class="line">        cv.imshow(<span class="string">&#x27;frame&#x27;</span>, frame)</span><br><span class="line">        output.write(frame)</span><br><span class="line">        <span class="comment"># ---------------------------------</span></span><br><span class="line">        c = cv.waitKey(fps)  <span class="comment"># fps</span></span><br><span class="line">        <span class="keyword">if</span> c == <span class="number">32</span>:  <span class="comment"># 空格结束</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"><span class="comment"># -----------------------------------------</span></span><br><span class="line">cap.release()</span><br><span class="line">output.release()</span><br><span class="line"><span class="comment"># -----------------------------------------</span></span><br><span class="line">cv.waitKey(<span class="number">1</span>)</span><br><span class="line">cv.destroyAllWindows()</span><br><span class="line"><span class="comment"># -----------------------------------------</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="【摄像头处理模板】"><a href="#【摄像头处理模板】" class="headerlink" title="【摄像头处理模板】"></a>【摄像头处理模板】</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> os.path <span class="keyword">as</span> pa</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="comment"># -----------------------------------------</span></span><br><span class="line">res = <span class="string">&#x27;../../AssetResources&#x27;</span>  <span class="comment"># pa.join(res, &#x27;Videos/&#x27;)</span></span><br><span class="line"><span class="comment"># -----------------------------------------</span></span><br><span class="line">cap = cv.VideoCapture(<span class="number">0</span>)  <span class="comment"># pa.join(res, &#x27;Videos/video1.mp4&#x27;)</span></span><br><span class="line">capResolution = (<span class="built_in">int</span>(cap.get(<span class="number">3</span>)), <span class="built_in">int</span>(cap.get(<span class="number">4</span>)))  <span class="comment"># 3-&gt;width 4-&gt;height</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">resolution = capResolution  <span class="comment"># 3-&gt;width 4-&gt;height</span></span><br><span class="line">cap.<span class="built_in">set</span>(<span class="number">3</span>, resolution[<span class="number">0</span>]), cap.<span class="built_in">set</span>(<span class="number">4</span>, resolution[<span class="number">1</span>])</span><br><span class="line">fourcc = cv.VideoWriter_fourcc(*<span class="string">&#x27;DIVX&#x27;</span>)  <span class="comment"># MJPG-.avi/DIVX-.mp4/FLV1-.flv/8BPS-.mov</span></span><br><span class="line">output = cv.VideoWriter(pa.join(res, <span class="string">&#x27;Videos/video2.mp4&#x27;</span>), fourcc, <span class="number">30</span>, resolution, isColor=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># -----------------------------------------</span></span><br><span class="line"><span class="keyword">while</span> cap.isOpened():</span><br><span class="line">    ret, frame = cap.read()</span><br><span class="line">    <span class="keyword">if</span> ret:</span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        <span class="comment"># ---------------------------------</span></span><br><span class="line">        cv.imshow(<span class="string">&#x27;frame&#x27;</span>, frame)</span><br><span class="line">        output.write(frame)</span><br><span class="line">        <span class="comment"># ---------------------------------</span></span><br><span class="line">        c = cv.waitKey(<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span> c == <span class="number">32</span>:  <span class="comment"># 空格结束</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"><span class="comment"># -----------------------------------------</span></span><br><span class="line">cap.release()</span><br><span class="line">output.release()</span><br><span class="line"><span class="comment"># -----------------------------------------</span></span><br><span class="line">cv.waitKey(<span class="number">1000</span>)</span><br><span class="line">cv.destroyAllWindows()</span><br><span class="line"><span class="comment"># -----------------------------------------</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="■（十九）绘图交互"><a href="#■（十九）绘图交互" class="headerlink" title="■（十九）绘图交互"></a>■（十九）绘图交互</h2><h3 id="【绘图】"><a href="#【绘图】" class="headerlink" title="【绘图】"></a>【绘图】</h3><p>cv.line()【直线】</p>
<p>cv.rectangle()【矩形】</p>
<p>cv.circle()【圆形】</p>
<p>cv.ellipse()【椭圆】</p>
<p>cv.polylines()【多边形】</p>
<p>cv.putText()【文字】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">canvas = np.zeros((<span class="number">500</span>, <span class="number">500</span>, <span class="number">3</span>), dtype=np.uint8)</span><br><span class="line">row, col = canvas.shape[:<span class="number">2</span>]</span><br><span class="line"><span class="comment"># 直线</span></span><br><span class="line">cv.line(canvas, (<span class="number">0</span>, <span class="number">250</span>), (<span class="number">500</span>, <span class="number">250</span>), (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">1</span>, cv.LINE_AA)</span><br><span class="line">cv.line(canvas, (<span class="number">250</span>, <span class="number">0</span>), (<span class="number">250</span>, <span class="number">500</span>), (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">1</span>, cv.LINE_AA)</span><br><span class="line"><span class="comment"># 矩形</span></span><br><span class="line">cv.rectangle(canvas, (<span class="number">125</span>, <span class="number">125</span>), (<span class="number">375</span>, <span class="number">375</span>), (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">1</span>, cv.LINE_AA)</span><br><span class="line"><span class="comment"># 圆形</span></span><br><span class="line">cv.circle(canvas, (<span class="number">250</span>, <span class="number">250</span>), <span class="number">125</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">1</span>, cv.LINE_AA)</span><br><span class="line"><span class="comment"># 椭圆</span></span><br><span class="line">cv.ellipse(canvas, (<span class="number">250</span>, <span class="number">250</span>), (<span class="number">250</span>, <span class="number">125</span>), <span class="number">90</span>, <span class="number">0</span>, <span class="number">360</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">1</span>, cv.LINE_AA)</span><br><span class="line"><span class="comment"># 多边形</span></span><br><span class="line">points = np.array([[[<span class="number">250</span>, <span class="number">0</span>]], [[<span class="number">500</span>, <span class="number">250</span>]], [[<span class="number">250</span>, <span class="number">500</span>]], [[<span class="number">0</span>, <span class="number">250</span>]]], dtype=np.int32)</span><br><span class="line">cv.polylines(canvas, [points], <span class="literal">True</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">1</span>, cv.LINE_AA)</span><br><span class="line"><span class="comment"># 文字</span></span><br><span class="line">cv.putText(canvas, <span class="string">&#x27;HELLOWORLD&#x27;</span>, (<span class="number">250</span>, <span class="number">250</span>), cv.FONT_HERSHEY_SIMPLEX, <span class="number">1</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">1</span>)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">cv.imshow(<span class="string">&#x27;canvas&#x27;</span>, canvas)</span><br></pre></td></tr></table></figure>

<h3 id="【鼠标与键】"><a href="#【鼠标与键】" class="headerlink" title="【鼠标与键】"></a>【鼠标与键】</h3><p>cv.setMouseCallback()【鼠标方法与窗口映射】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 左中右键</span></span><br><span class="line"><span class="comment"># EVENT_FLAG_LBUTTON = 1</span></span><br><span class="line"><span class="comment"># EVENT_LBUTTONDOWN = 1</span></span><br><span class="line"><span class="comment"># EVENT_LBUTTONUP = 4</span></span><br><span class="line"><span class="comment"># EVENT_LBUTTONDBLCLK = 7</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># EVENT_FLAG_RBUTTON = 2</span></span><br><span class="line"><span class="comment"># EVENT_RBUTTONDOWN = 2</span></span><br><span class="line"><span class="comment"># EVENT_RBUTTONUP = 5</span></span><br><span class="line"><span class="comment"># EVENT_RBUTTONDBLCLK = 8</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># EVENT_FLAG_MBUTTON = 4</span></span><br><span class="line"><span class="comment"># EVENT_MBUTTONDOWN = 3</span></span><br><span class="line"><span class="comment"># EVENT_MBUTTONUP = 6</span></span><br><span class="line"><span class="comment"># EVENT_MBUTTONDBLCLK = 9</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># EVENT_MOUSEMOVE = 0</span></span><br><span class="line"><span class="comment"># EVENT_MOUSEWHEEL = 10</span></span><br><span class="line"><span class="comment"># EVENT_MOUSEHWHEEL = 11</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 附属键</span></span><br><span class="line"><span class="comment"># EVENT_FLAG_CTRLKEY = 8</span></span><br><span class="line"><span class="comment"># EVENT_FLAG_SHIFTKEY = 16</span></span><br><span class="line"><span class="comment"># EVENT_FLAG_ALTKEY = 32</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># -----------------------------------------</span></span><br><span class="line">startPoint = (<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">endPoint = (<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">mouse_action</span>(<span class="params">event, x, y, flags, param</span>):</span><br><span class="line">    <span class="keyword">global</span> startPoint, endPoint</span><br><span class="line">    <span class="keyword">if</span> event == cv.EVENT_LBUTTONDOWN:</span><br><span class="line">        startPoint = (x, y)</span><br><span class="line">    <span class="keyword">elif</span> event == cv.EVENT_LBUTTONUP:</span><br><span class="line">        endPoint = (x, y)</span><br><span class="line">        cv.rectangle(img, startPoint, endPoint, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">1</span>, cv.LINE_AA)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">img = np.full((<span class="number">500</span>, <span class="number">500</span>, <span class="number">3</span>), fill_value=<span class="number">0</span>, dtype=np.uint8)</span><br><span class="line">cv.namedWindow(<span class="string">&#x27;win1&#x27;</span>)</span><br><span class="line">cv.setMouseCallback(<span class="string">&#x27;win1&#x27;</span>, mouse_action)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    cv.imshow(<span class="string">&#x27;win1&#x27;</span>, img)</span><br><span class="line">    <span class="keyword">if</span> cv.waitKey(<span class="number">20</span>) == <span class="number">32</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"><span class="comment"># -----------------------------------------</span></span><br><span class="line">cv.destroyAllWindows()</span><br><span class="line"><span class="comment"># -----------------------------------------</span></span><br></pre></td></tr></table></figure>

<h3 id="【滑动条】"><a href="#【滑动条】" class="headerlink" title="【滑动条】"></a>【滑动条】</h3><p>cv.createTrackbar()【滑动条创建】</p>
<p>cv.getTrackbarPos()【滑动条调用】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">change_color</span>(<span class="params">pos</span>):</span><br><span class="line">    <span class="comment"># cv.getTrackbarPos(滚动条名，窗口名)</span></span><br><span class="line">    r = cv.getTrackbarPos(<span class="string">&#x27;R&#x27;</span>, <span class="string">&#x27;img&#x27;</span>)</span><br><span class="line">    g = cv.getTrackbarPos(<span class="string">&#x27;G&#x27;</span>, <span class="string">&#x27;img&#x27;</span>)</span><br><span class="line">    b = cv.getTrackbarPos(<span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;img&#x27;</span>)</span><br><span class="line">    <span class="comment"># 调用滑动条</span></span><br><span class="line">    img[:, :, :] = [b, g, r]</span><br><span class="line"><span class="comment"># 窗口</span></span><br><span class="line">img = np.zeros((<span class="number">100</span>, <span class="number">700</span>, <span class="number">3</span>), dtype=np.uint8)</span><br><span class="line">cv.namedWindow(<span class="string">&#x27;img&#x27;</span>)</span><br><span class="line"><span class="comment"># cv.createTrackbar(滚动条名，窗口名，范围最小值，范围最大值，调用函数)</span></span><br><span class="line">cv.createTrackbar(<span class="string">&#x27;R&#x27;</span>, <span class="string">&#x27;img&#x27;</span>, <span class="number">0</span>, <span class="number">255</span>, change_color)</span><br><span class="line">cv.createTrackbar(<span class="string">&#x27;G&#x27;</span>, <span class="string">&#x27;img&#x27;</span>, <span class="number">0</span>, <span class="number">255</span>, change_color)</span><br><span class="line">cv.createTrackbar(<span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;img&#x27;</span>, <span class="number">0</span>, <span class="number">255</span>, change_color)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:  <span class="comment"># 窗口刷新</span></span><br><span class="line">    cv.imshow(<span class="string">&#x27;img&#x27;</span>, img)</span><br><span class="line">    <span class="keyword">if</span> cv.waitKey(<span class="number">1</span>) == <span class="number">32</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"><span class="comment"># -----------------------------------------</span></span><br><span class="line">cv.destroyAllWindows()</span><br><span class="line"><span class="comment"># -----------------------------------------</span></span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://iamsleepingnow.github.io">彭҈̢̛艺҉͜͝伟҈̧̕</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://iamsleepingnow.github.io/2021/02/03/Python/opencvPython%E6%95%99%E7%A8%8B/">http://iamsleepingnow.github.io/2021/02/03/Python/opencvPython%E6%95%99%E7%A8%8B/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="null" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://iamsleepingnow.github.io" target="_blank">Iamsleepingnow 世界</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%95%99%E7%A8%8B/">教程</a><a class="post-meta__tags" href="/tags/python/">python</a><a class="post-meta__tags" href="/tags/%E7%BB%98%E5%9B%BE/">绘图</a><a class="post-meta__tags" href="/tags/%E9%95%BF%E6%96%87/">长文</a><a class="post-meta__tags" href="/tags/Opencv/">Opencv</a></div><div class="post_share"></div></div><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/01/10/Unity/Unity%E4%B8%8A%E9%81%93%E7%A7%98%E7%B1%8D/" title="Unity上道秘籍"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-10</div><div class="title">Unity上道秘籍</div></div></a></div><div><a href="/2021/02/03/Python/Python%E7%8E%8B%E5%85%AB%E5%AD%A6%E4%B9%A0/" title="Python小海龟基础"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-02-03</div><div class="title">Python小海龟基础</div></div></a></div><div><a href="/2021/02/03/Python/Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/" title="Python基础语法"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-02-03</div><div class="title">Python基础语法</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">彭҈̢̛艺҉͜͝伟҈̧̕</div><div class="author-info__description">Iamsleepingnow 世界</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">39</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">68</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#OpencvPython%E6%AD%A3%E7%BB%8F%E6%95%99%E7%A8%8B"><span class="toc-number">1.</span> <span class="toc-text">OpencvPython正经教程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%96%A0%EF%BC%88%E3%80%87%EF%BC%89%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF"><span class="toc-number">1.1.</span> <span class="toc-text">■（〇）标准模板</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E6%A8%A1%E5%9D%97%E5%BC%95%E5%85%A5%E3%80%91"><span class="toc-number">1.1.1.</span> <span class="toc-text">【模块引入】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%96%A0%EF%BC%88%E4%B8%80%EF%BC%89%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6"><span class="toc-number">1.2.</span> <span class="toc-text">■（一）图像处理基础框架</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E5%9B%BE%E5%83%8F%E8%AF%BB%E5%8F%96%E3%80%91"><span class="toc-number">1.2.1.</span> <span class="toc-text">【图像读取】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E7%AA%97%E5%8F%A3%E5%AE%9A%E4%B9%89%E3%80%91"><span class="toc-number">1.2.2.</span> <span class="toc-text">【窗口定义】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E5%9B%BE%E5%83%8F%E6%98%BE%E7%A4%BA%E3%80%91"><span class="toc-number">1.2.3.</span> <span class="toc-text">【图像显示】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E7%AA%97%E5%8F%A3%E7%AD%89%E5%BE%85%E3%80%91"><span class="toc-number">1.2.4.</span> <span class="toc-text">【窗口等待】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E7%AA%97%E5%8F%A3%E8%BF%94%E5%9B%9E%E3%80%91"><span class="toc-number">1.2.5.</span> <span class="toc-text">【窗口返回】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E5%9B%BE%E5%83%8F%E5%86%99%E5%85%A5%E3%80%91"><span class="toc-number">1.2.6.</span> <span class="toc-text">【图像写入】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%96%A0%EF%BC%88%E4%BA%8C%EF%BC%89%E9%80%9A%E9%81%93%E4%B8%8E%E5%83%8F%E7%B4%A0"><span class="toc-number">1.3.</span> <span class="toc-text">■（二）通道与像素</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E5%9B%BE%E5%83%8F%E4%BF%A1%E6%81%AF%E3%80%91"><span class="toc-number">1.3.1.</span> <span class="toc-text">【图像信息】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E5%9B%BE%E5%83%8F%E7%B1%BB%E5%9E%8B%E3%80%91"><span class="toc-number">1.3.2.</span> <span class="toc-text">【图像类型】</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88%E4%BA%8C%E5%80%BC%E5%9B%BE%EF%BC%89"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">（二值图）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88%E7%81%B0%E5%BA%A6%E5%9B%BE-8%E4%BD%8D-%EF%BC%89"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">（灰度图(8位)）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88%E5%BD%A9%E8%89%B2%E5%9B%BE-8%E4%BD%8D-%EF%BC%89"><span class="toc-number">1.3.2.3.</span> <span class="toc-text">（彩色图(8位)）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E6%97%A0%E4%B8%AD%E7%94%9F%E6%9C%89%E3%80%91"><span class="toc-number">1.3.3.</span> <span class="toc-text">【无中生有】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E4%BD%BF%E7%94%A8%E5%88%87%E5%88%80%E3%80%91"><span class="toc-number">1.3.4.</span> <span class="toc-text">【使用切刀】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E8%AE%BF%E9%97%AE%E5%83%8F%E7%B4%A0%E3%80%91"><span class="toc-number">1.3.5.</span> <span class="toc-text">【访问像素】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%80%9A%E9%81%93%E6%8B%86%E5%90%88%E3%80%91"><span class="toc-number">1.3.6.</span> <span class="toc-text">【通道拆合】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%96%A0%EF%BC%88%E4%B8%89%EF%BC%89%E5%9B%BE%E5%83%8F%E6%B7%B7%E5%90%88%E4%B8%8E%E4%BD%8D%E8%BF%90%E7%AE%97"><span class="toc-number">1.4.</span> <span class="toc-text">■（三）图像混合与位运算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E5%9B%BE%E5%83%8F%E5%8A%A0%E6%B3%95%E3%80%91"><span class="toc-number">1.4.1.</span> <span class="toc-text">【图像加法】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E5%9B%BE%E5%83%8F%E6%B7%B7%E5%90%88%E3%80%91"><span class="toc-number">1.4.2.</span> <span class="toc-text">【图像混合】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E3%80%91"><span class="toc-number">1.4.3.</span> <span class="toc-text">【逻辑运算】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E6%8C%89%E4%BD%8D%E8%BF%90%E7%AE%97%E3%80%91"><span class="toc-number">1.4.4.</span> <span class="toc-text">【按位运算】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E6%8E%A9%E6%A8%A1-%E9%81%AE%E7%BD%A9-%E3%80%91"><span class="toc-number">1.4.5.</span> <span class="toc-text">【掩模(遮罩)】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E4%BD%8D%E5%B9%B3%E9%9D%A2%E5%88%86%E8%A7%A3%E3%80%91"><span class="toc-number">1.4.6.</span> <span class="toc-text">【位平面分解】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E5%9B%BE%E5%83%8F%E5%8A%A0%E5%AF%86%E3%80%91"><span class="toc-number">1.4.7.</span> <span class="toc-text">【图像加密】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E6%95%B0%E5%AD%97%E6%B0%B4%E5%8D%B0%E3%80%91"><span class="toc-number">1.4.8.</span> <span class="toc-text">【数字水印】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%96%A0%EF%BC%88%E5%9B%9B%EF%BC%89%E8%89%B2%E5%BD%A9%E7%A9%BA%E9%97%B4"><span class="toc-number">1.5.</span> <span class="toc-text">■（四）色彩空间</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E8%89%B2%E5%BD%A9%E7%A9%BA%E9%97%B4%E7%B1%BB%E5%9E%8B%E3%80%91"><span class="toc-number">1.5.1.</span> <span class="toc-text">【色彩空间类型】</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88RGB-BGR%EF%BC%89"><span class="toc-number">1.5.1.1.</span> <span class="toc-text">（RGB&#x2F;BGR）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88GRAY%EF%BC%89"><span class="toc-number">1.5.1.2.</span> <span class="toc-text">（GRAY）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88XYZ%EF%BC%89"><span class="toc-number">1.5.1.3.</span> <span class="toc-text">（XYZ）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88HSV%EF%BC%89"><span class="toc-number">1.5.1.4.</span> <span class="toc-text">（HSV）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E8%89%B2%E5%BD%A9%E7%A9%BA%E9%97%B4%E8%BD%AC%E6%8D%A2%E3%80%91"><span class="toc-number">1.5.2.</span> <span class="toc-text">【色彩空间转换】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%9C%E8%89%B2%E9%80%89%E6%8B%A9%E3%80%91"><span class="toc-number">1.5.3.</span> <span class="toc-text">【颜色选择】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90Alpha%E9%80%8F%E6%98%8E%E9%80%9A%E9%81%93%E3%80%91"><span class="toc-number">1.5.4.</span> <span class="toc-text">【Alpha透明通道】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%96%A0%EF%BC%88%E4%BA%94%EF%BC%89%E5%87%A0%E4%BD%95%E5%8F%98%E6%8D%A2"><span class="toc-number">1.6.</span> <span class="toc-text">■（五）几何变换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E7%BC%A9%E6%94%BE%E3%80%91"><span class="toc-number">1.6.1.</span> <span class="toc-text">【缩放】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E7%BF%BB%E8%BD%AC%E3%80%91"><span class="toc-number">1.6.2.</span> <span class="toc-text">【翻转】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E4%BB%BF%E5%B0%84-%E6%98%A0%E5%B0%84-%E3%80%91"><span class="toc-number">1.6.3.</span> <span class="toc-text">【仿射(映射)】</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88%E6%89%8B%E5%8A%A8%E7%9F%A9%E9%98%B5%E6%9E%84%E6%88%90%EF%BC%89"><span class="toc-number">1.6.3.1.</span> <span class="toc-text">（手动矩阵构成）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88%E6%97%8B%E8%BD%AC%E7%9F%A9%E9%98%B5%E6%9E%84%E6%88%90%EF%BC%89"><span class="toc-number">1.6.3.2.</span> <span class="toc-text">（旋转矩阵构成）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88%E5%B9%B3%E8%A1%8C%E5%9B%9B%E8%BE%B9%E5%BD%A2%E6%9E%84%E6%88%90%EF%BC%89"><span class="toc-number">1.6.3.3.</span> <span class="toc-text">（平行四边形构成）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E5%9B%9B%E8%A7%92%E5%8F%98%E5%B9%BB%E3%80%91"><span class="toc-number">1.6.4.</span> <span class="toc-text">【四角变幻】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%80%90%E5%83%8F%E7%B4%A0%E6%98%A0%E5%B0%84%E3%80%91"><span class="toc-number">1.6.5.</span> <span class="toc-text">【逐像素映射】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%96%A0%EF%BC%88%E5%85%AD%EF%BC%89%E9%98%88%E5%80%BC"><span class="toc-number">1.7.</span> <span class="toc-text">■（六）阈值</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%98%88%E5%80%BC%E6%8F%90%E5%8F%96%E5%A4%84%E7%90%86%E3%80%91"><span class="toc-number">1.7.1.</span> <span class="toc-text">【阈值提取处理】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E8%87%AA%E9%80%82%E5%BA%94%E9%98%88%E5%80%BC%E5%A4%84%E7%90%86%E3%80%91"><span class="toc-number">1.7.2.</span> <span class="toc-text">【自适应阈值处理】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E8%87%AA%E5%8A%A8%E5%8C%B9%E9%85%8D%E9%98%88%E5%80%BC%E5%A4%84%E7%90%86%E3%80%91"><span class="toc-number">1.7.3.</span> <span class="toc-text">【自动匹配阈值处理】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%96%A0%EF%BC%88%E4%B8%83%EF%BC%89%E5%9B%BE%E5%83%8F%E6%BB%A4%E6%B3%A2-%E6%A8%A1%E7%B3%8A"><span class="toc-number">1.8.</span> <span class="toc-text">■（七）图像滤波(模糊)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E5%9D%87%E5%80%BC%E6%BB%A4%E6%B3%A2%E3%80%91"><span class="toc-number">1.8.1.</span> <span class="toc-text">【均值滤波】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E6%96%B9%E6%A1%86%E6%BB%A4%E6%B3%A2%E3%80%91"><span class="toc-number">1.8.2.</span> <span class="toc-text">【方框滤波】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%AB%98%E6%96%AF%E6%BB%A4%E6%B3%A2%E3%80%91"><span class="toc-number">1.8.3.</span> <span class="toc-text">【高斯滤波】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E4%B8%AD%E5%80%BC%E6%BB%A4%E6%B3%A2%E3%80%91"><span class="toc-number">1.8.4.</span> <span class="toc-text">【中值滤波】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E5%8F%8C%E8%BE%B9%E6%BB%A4%E6%B3%A2%E3%80%91"><span class="toc-number">1.8.5.</span> <span class="toc-text">【双边滤波】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E8%87%AA%E5%88%B62D%E5%8D%B7%E7%A7%AF%E3%80%91"><span class="toc-number">1.8.6.</span> <span class="toc-text">【自制2D卷积】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%96%A0%EF%BC%88%E5%85%AB%EF%BC%89%E5%BD%A2%E6%80%81%E5%AD%A6"><span class="toc-number">1.9.</span> <span class="toc-text">■（八）形态学</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E8%85%90%E8%9A%80%E3%80%91"><span class="toc-number">1.9.1.</span> <span class="toc-text">【腐蚀】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E8%86%A8%E8%83%80%E3%80%91"><span class="toc-number">1.9.2.</span> <span class="toc-text">【膨胀】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%80%9A%E7%94%A8%E5%87%BD%E6%95%B0%E3%80%91"><span class="toc-number">1.9.3.</span> <span class="toc-text">【通用函数】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E5%BC%80%E8%BF%90%E7%AE%97%E3%80%91"><span class="toc-number">1.9.4.</span> <span class="toc-text">【开运算】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%97%AD%E8%BF%90%E7%AE%97%E3%80%91"><span class="toc-number">1.9.5.</span> <span class="toc-text">【闭运算】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E5%BD%A2%E6%80%81%E5%AD%A6%E6%A2%AF%E5%BA%A6%E8%BF%90%E7%AE%97%E3%80%91"><span class="toc-number">1.9.6.</span> <span class="toc-text">【形态学梯度运算】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E7%A4%BC%E5%B8%BD%E8%BF%90%E7%AE%97%E3%80%91"><span class="toc-number">1.9.7.</span> <span class="toc-text">【礼帽运算】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%BB%91%E5%B8%BD%E8%BF%90%E7%AE%97%E3%80%91"><span class="toc-number">1.9.8.</span> <span class="toc-text">【黑帽运算】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E6%A0%B8%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B%E3%80%91"><span class="toc-number">1.9.9.</span> <span class="toc-text">【核函数类型】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%96%A0%EF%BC%88%E4%B9%9D%EF%BC%89%E8%BE%B9%E7%BC%98%E6%A2%AF%E5%BA%A6"><span class="toc-number">1.10.</span> <span class="toc-text">■（九）边缘梯度</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90Sobel%E7%AE%97%E5%AD%90%E3%80%91"><span class="toc-number">1.10.1.</span> <span class="toc-text">【Sobel算子】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90Scharr%E7%AE%97%E5%AD%90%E3%80%91"><span class="toc-number">1.10.2.</span> <span class="toc-text">【Scharr算子】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90Laplacian%E7%AE%97%E5%AD%90%E3%80%91"><span class="toc-number">1.10.3.</span> <span class="toc-text">【Laplacian算子】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%96%A0%EF%BC%88%E5%8D%81%EF%BC%89%E8%BE%B9%E7%BC%98%E6%A3%80%E6%B5%8B"><span class="toc-number">1.11.</span> <span class="toc-text">■（十）边缘检测</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E4%B8%93%E4%B8%9A%E8%BE%B9%E7%BC%98%E6%A3%80%E6%B5%8B%E3%80%91"><span class="toc-number">1.11.1.</span> <span class="toc-text">【专业边缘检测】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%96%A0%EF%BC%88%E5%8D%81%E4%B8%80%EF%BC%89%E5%9B%BE%E5%83%8F%E9%87%91%E5%AD%97%E5%A1%94"><span class="toc-number">1.12.</span> <span class="toc-text">■（十一）图像金字塔</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%AB%98%E6%96%AF%E9%87%91%E5%AD%97%E5%A1%94%E3%80%91"><span class="toc-number">1.12.1.</span> <span class="toc-text">【高斯金字塔】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E6%8B%89%E6%99%AE%E6%8B%89%E6%96%AF%E9%87%91%E5%AD%97%E5%A1%94%E3%80%91"><span class="toc-number">1.12.2.</span> <span class="toc-text">【拉普拉斯金字塔】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E5%9B%BE%E5%83%8F%E5%90%91%E4%B8%8B%E9%87%87%E6%A0%B7%E3%80%91"><span class="toc-number">1.12.3.</span> <span class="toc-text">【图像向下采样】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E5%9B%BE%E5%83%8F%E5%90%91%E4%B8%8A%E9%87%87%E6%A0%B7%E3%80%91"><span class="toc-number">1.12.4.</span> <span class="toc-text">【图像向上采样】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E6%8B%89%E6%99%AE%E6%8B%89%E6%96%AF%E4%B8%8E%E6%81%A2%E5%A4%8D%E5%8E%9F%E5%9B%BE%E3%80%91"><span class="toc-number">1.12.5.</span> <span class="toc-text">【拉普拉斯与恢复原图】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%96%A0%EF%BC%88%E5%8D%81%E4%BA%8C%EF%BC%89%E5%9B%BE%E5%83%8F%E8%BD%AE%E5%BB%93"><span class="toc-number">1.13.</span> <span class="toc-text">■（十二）图像轮廓</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E7%BB%98%E5%88%B6%E8%BD%AE%E5%BB%93%E3%80%91"><span class="toc-number">1.13.1.</span> <span class="toc-text">【绘制轮廓】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E7%9F%A9%E7%89%B9%E5%BE%81%E3%80%91"><span class="toc-number">1.13.2.</span> <span class="toc-text">【矩特征】</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88moments%E7%9F%A9%E9%9B%86%EF%BC%89"><span class="toc-number">1.13.2.1.</span> <span class="toc-text">（moments矩集）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88%E8%BD%AE%E5%BB%93%E9%9D%A2%E7%A7%AF%EF%BC%89"><span class="toc-number">1.13.2.2.</span> <span class="toc-text">（轮廓面积）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88%E8%BD%AE%E5%BB%93%E5%91%A8%E9%95%BF%EF%BC%89"><span class="toc-number">1.13.2.3.</span> <span class="toc-text">（轮廓周长）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88Hu%E5%BD%92%E4%B8%80%E5%8C%96%E4%B8%AD%E5%BF%83%E7%9F%A9%EF%BC%89"><span class="toc-number">1.13.2.4.</span> <span class="toc-text">（Hu归一化中心矩）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88%E8%BD%AE%E5%BB%93%E5%8C%B9%E9%85%8D%EF%BC%89"><span class="toc-number">1.13.2.5.</span> <span class="toc-text">（轮廓匹配）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E5%BD%A2%E7%8A%B6%E5%8C%B9%E9%85%8D%E3%80%91"><span class="toc-number">1.13.3.</span> <span class="toc-text">【形状匹配】</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88%E6%AD%A3%E7%9F%A9%E5%BD%A2%E5%8C%85%E5%9B%B4%E6%A1%86%EF%BC%89"><span class="toc-number">1.13.3.1.</span> <span class="toc-text">（正矩形包围框）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88%E6%9C%80%E5%B0%8F%E7%9F%A9%E5%BD%A2%E5%8C%85%E5%9B%B4%E6%A1%86%EF%BC%89"><span class="toc-number">1.13.3.2.</span> <span class="toc-text">（最小矩形包围框）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88%E6%9C%80%E5%B0%8F%E5%9C%86%E5%8C%85%E5%9B%B4%E6%A1%86%EF%BC%89"><span class="toc-number">1.13.3.3.</span> <span class="toc-text">（最小圆包围框）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88%E6%9C%80%E4%BC%98%E6%A4%AD%E5%9C%86%E5%8C%85%E5%9B%B4%E6%A1%86%EF%BC%89"><span class="toc-number">1.13.3.4.</span> <span class="toc-text">（最优椭圆包围框）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88%E6%9C%80%E4%BC%98%E7%9B%B4%E7%BA%BF%E5%AF%BC%E5%90%91%EF%BC%89"><span class="toc-number">1.13.3.5.</span> <span class="toc-text">（最优直线导向）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88%E6%9C%80%E5%B0%8F%E4%B8%89%E8%A7%92%E5%BD%A2%E5%8C%85%E5%9B%B4%E6%A1%86%EF%BC%89"><span class="toc-number">1.13.3.6.</span> <span class="toc-text">（最小三角形包围框）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88%E7%9B%B8%E4%BC%BC%E5%A4%9A%E8%BE%B9%E5%BD%A2%EF%BC%89"><span class="toc-number">1.13.3.7.</span> <span class="toc-text">（相似多边形）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E5%87%B8%E5%8C%85%E3%80%91"><span class="toc-number">1.13.4.</span> <span class="toc-text">【凸包】</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88%E5%87%B8%E5%8C%85%EF%BC%89"><span class="toc-number">1.13.4.1.</span> <span class="toc-text">（凸包）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88%E5%87%B8%E7%BC%BA%E9%99%B7%EF%BC%89"><span class="toc-number">1.13.4.2.</span> <span class="toc-text">（凸缺陷）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88%E6%98%AF%E5%90%A6%E5%87%B8%EF%BC%89"><span class="toc-number">1.13.4.3.</span> <span class="toc-text">（是否凸）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88%E7%82%B9%E4%B8%8E%E8%BD%AE%E5%BB%93%EF%BC%89"><span class="toc-number">1.13.4.4.</span> <span class="toc-text">（点与轮廓）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E5%BD%A2%E7%8A%B6%E5%9C%BA%E6%99%AF%E8%B7%9D%E7%A6%BB%E3%80%91"><span class="toc-number">1.13.5.</span> <span class="toc-text">【形状场景距离】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E8%BD%AE%E5%BB%93%E7%89%B9%E6%AE%8A%E5%80%BC%E3%80%91"><span class="toc-number">1.13.6.</span> <span class="toc-text">【轮廓特殊值】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%96%A0%EF%BC%88%E5%8D%81%E4%B8%89%EF%BC%89%E7%9B%B4%E6%96%B9%E5%9B%BE"><span class="toc-number">1.14.</span> <span class="toc-text">■（十三）直方图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E7%BB%98%E5%88%B6%E7%9B%B4%E6%96%B9%E5%9B%BE%E3%80%91"><span class="toc-number">1.14.1.</span> <span class="toc-text">【绘制直方图】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E7%9B%B4%E6%96%B9%E5%9B%BE%E5%8A%A0%E9%81%AE%E7%BD%A9%E3%80%91"><span class="toc-number">1.14.2.</span> <span class="toc-text">【直方图加遮罩】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E5%9B%BE%E5%83%8F%E5%9D%87%E8%A1%A1%E5%8C%96%E3%80%91"><span class="toc-number">1.14.3.</span> <span class="toc-text">【图像均衡化】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90matplotlib%E7%9A%84%E7%BB%98%E5%9B%BE%E4%BB%8B%E7%BB%8D%E3%80%91"><span class="toc-number">1.14.4.</span> <span class="toc-text">【matplotlib的绘图介绍】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%96%A0%EF%BC%88%E5%8D%81%E5%9B%9B%EF%BC%89%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2"><span class="toc-number">1.15.</span> <span class="toc-text">■（十四）傅里叶变换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90FFT%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2%E3%80%91"><span class="toc-number">1.15.1.</span> <span class="toc-text">【FFT傅里叶变换】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E4%BA%8C%E7%BB%B4%E9%AB%98%E9%80%9A%E4%BD%8E%E9%80%9A%E5%A4%84%E7%90%86%E3%80%91"><span class="toc-number">1.15.2.</span> <span class="toc-text">【二维高通低通处理】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%96%A0%EF%BC%88%E5%8D%81%E4%BA%94%EF%BC%89%E6%A8%A1%E6%9D%BF%E5%8C%B9%E9%85%8D"><span class="toc-number">1.16.</span> <span class="toc-text">■（十五）模板匹配</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E5%8D%95%E6%A8%A1%E6%9D%BF%E5%8D%95%E5%8C%B9%E9%85%8D%E7%BB%93%E6%9E%84%E3%80%91"><span class="toc-number">1.16.1.</span> <span class="toc-text">【单模板单匹配结构】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E5%8D%95%E6%A8%A1%E6%9D%BF%E5%A4%9A%E5%8C%B9%E9%85%8D%E7%BB%93%E6%9E%84%E3%80%91"><span class="toc-number">1.16.2.</span> <span class="toc-text">【单模板多匹配结构】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%96%A0%EF%BC%88%E5%8D%81%E5%85%AD%EF%BC%89%E9%9C%8D%E5%A4%AB%E5%8F%98%E6%8D%A2"><span class="toc-number">1.17.</span> <span class="toc-text">■（十六）霍夫变换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%9C%8D%E5%A4%AB%E5%8F%98%E6%8D%A2%E3%80%91"><span class="toc-number">1.17.1.</span> <span class="toc-text">【霍夫变换】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E6%A6%82%E7%8E%87%E9%9C%8D%E5%A4%AB%E5%8F%98%E6%8D%A2%E3%80%91"><span class="toc-number">1.17.2.</span> <span class="toc-text">【概率霍夫变换】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%9C%8D%E5%A4%AB%E5%9C%86%E7%8E%AF%E5%8F%98%E6%8D%A2%E3%80%91"><span class="toc-number">1.17.3.</span> <span class="toc-text">【霍夫圆环变换】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%96%A0%EF%BC%88%E5%8D%81%E4%B8%83%EF%BC%89%E5%9B%BE%E5%83%8F%E6%8F%90%E5%8F%96"><span class="toc-number">1.18.</span> <span class="toc-text">■（十七）图像提取</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E5%89%8D%E6%99%AF%E4%B8%8E%E8%83%8C%E6%99%AF%E3%80%91"><span class="toc-number">1.18.1.</span> <span class="toc-text">【前景与背景】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E5%88%86%E6%B0%B4%E5%B2%AD%E7%AE%97%E6%B3%95%E3%80%91"><span class="toc-number">1.18.2.</span> <span class="toc-text">【分水岭算法】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E6%96%B9%E6%A1%86%E5%89%8D%E6%99%AF%E6%8F%90%E5%8F%96%E3%80%91"><span class="toc-number">1.18.3.</span> <span class="toc-text">【方框前景提取】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E4%BA%A4%E4%BA%92%E5%BC%8F%E5%89%8D%E6%99%AF%E6%8F%90%E5%8F%96%E3%80%91"><span class="toc-number">1.18.4.</span> <span class="toc-text">【交互式前景提取】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%96%A0%EF%BC%88%E5%8D%81%E5%85%AB%EF%BC%89%E8%A7%86%E9%A2%91%E5%A4%84%E7%90%86"><span class="toc-number">1.19.</span> <span class="toc-text">■（十八）视频处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E4%B8%BB%E8%A6%81%E5%87%BD%E6%95%B0%E3%80%91"><span class="toc-number">1.19.1.</span> <span class="toc-text">【主要函数】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E8%A7%86%E9%A2%91%E5%A4%84%E7%90%86%E6%A8%A1%E6%9D%BF%E3%80%91"><span class="toc-number">1.19.2.</span> <span class="toc-text">【视频处理模板】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E6%91%84%E5%83%8F%E5%A4%B4%E5%A4%84%E7%90%86%E6%A8%A1%E6%9D%BF%E3%80%91"><span class="toc-number">1.19.3.</span> <span class="toc-text">【摄像头处理模板】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%96%A0%EF%BC%88%E5%8D%81%E4%B9%9D%EF%BC%89%E7%BB%98%E5%9B%BE%E4%BA%A4%E4%BA%92"><span class="toc-number">1.20.</span> <span class="toc-text">■（十九）绘图交互</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E7%BB%98%E5%9B%BE%E3%80%91"><span class="toc-number">1.20.1.</span> <span class="toc-text">【绘图】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%BC%A0%E6%A0%87%E4%B8%8E%E9%94%AE%E3%80%91"><span class="toc-number">1.20.2.</span> <span class="toc-text">【鼠标与键】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E6%BB%91%E5%8A%A8%E6%9D%A1%E3%80%91"><span class="toc-number">1.20.3.</span> <span class="toc-text">【滑动条】</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/04/20/Unity/%E9%93%BE%E5%BC%8F%E7%BC%96%E7%A8%8B%E4%B8%8EUniRX%E7%9A%84%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/" title="链式编程与UniRX的基础使用"><img src="https://s2.loli.net/2023/04/20/YRqUmMdQz3J9FHv.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="链式编程与UniRX的基础使用"/></a><div class="content"><a class="title" href="/2023/04/20/Unity/%E9%93%BE%E5%BC%8F%E7%BC%96%E7%A8%8B%E4%B8%8EUniRX%E7%9A%84%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/" title="链式编程与UniRX的基础使用">链式编程与UniRX的基础使用</a><time datetime="2023-04-19T17:54:42.000Z" title="发表于 2023-04-20 01:54:42">2023-04-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/07/08/Unity/Unity%E4%B8%AD%E8%AE%A9%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8B%E4%BB%A3%E7%A0%81%E7%9A%84%E7%A2%B0%E6%92%9E%E7%AE%B1%E5%A4%84%E4%BA%8E%E4%B8%8D%E5%90%8C%E5%B1%82%E7%BA%A7%E7%9A%84%E6%96%B9%E6%B3%95/" title="Unity中使碰撞检测的碰撞箱处于不同层级的方法"><img src="https://s2.loli.net/2023/04/20/8N4mKhbuFpfzlQU.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Unity中使碰撞检测的碰撞箱处于不同层级的方法"/></a><div class="content"><a class="title" href="/2022/07/08/Unity/Unity%E4%B8%AD%E8%AE%A9%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8B%E4%BB%A3%E7%A0%81%E7%9A%84%E7%A2%B0%E6%92%9E%E7%AE%B1%E5%A4%84%E4%BA%8E%E4%B8%8D%E5%90%8C%E5%B1%82%E7%BA%A7%E7%9A%84%E6%96%B9%E6%B3%95/" title="Unity中使碰撞检测的碰撞箱处于不同层级的方法">Unity中使碰撞检测的碰撞箱处于不同层级的方法</a><time datetime="2022-07-08T05:42:25.000Z" title="发表于 2022-07-08 13:42:25">2022-07-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/05/05/ArticyDraft/Articy%20Draft%203%20%E4%B8%8E%20Unity/" title="Articy Draft 3 与 Unity"><img src="https://s2.loli.net/2023/04/23/sEZ7jLdmUgJzKMh.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Articy Draft 3 与 Unity"/></a><div class="content"><a class="title" href="/2022/05/05/ArticyDraft/Articy%20Draft%203%20%E4%B8%8E%20Unity/" title="Articy Draft 3 与 Unity">Articy Draft 3 与 Unity</a><time datetime="2022-05-05T09:46:30.000Z" title="发表于 2022-05-05 17:46:30">2022-05-05</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/03/03/Arts/%E5%A6%82%E4%BD%95%E5%9C%A8PS%E4%B8%AD%E4%BD%BF%E7%94%A8DaVinci%E7%9A%84LUT/" title="如何在PS中使用DaVinci的LUT">如何在PS中使用DaVinci的LUT</a><time datetime="2022-03-03T13:36:03.000Z" title="发表于 2022-03-03 21:36:03">2022-03-03</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/01/10/Unity/Unity%E4%B8%8A%E9%81%93%E7%A7%98%E7%B1%8D/" title="Unity上道秘籍">Unity上道秘籍</a><time datetime="2022-01-10T11:16:30.000Z" title="发表于 2022-01-10 19:16:30">2022-01-10</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/banner_default_2k.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By 彭҈̢̛艺҉͜͝伟҈̧̕</div><div class="footer_custom_text">Iamsleepingnow 世界</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>